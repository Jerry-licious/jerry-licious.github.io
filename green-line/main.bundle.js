(()=>{"use strict";var e={49:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EconomicActor=void 0;const s=i(535),r=i(201),n=i(385);t.EconomicActor=class{constructor(){this.buyGoal=new Map,this.sellGoal=new Map,this.expectedMarketPrices=new Map,this.inventory=new s.Basket}placeSellOrders(e){this.setSellGoals(e);for(let t of this.sellGoal){let i=new n.Order(this,t[0],0);for(let s=0;s<t[1];s++)e.placeSellOrder(i)}}placeBuyOrders(e){this.setBuyGoals(e);for(let t of this.buyGoal){let i=new n.Order(this,t[0],this.expectedPrice(t[0]));for(let s=0;s<t[1];s++)e.placeBuyOrder(i)}}onSuccessfulSale(e){this.sellGoal.has(e)?this.sellGoal.set(e,this.sellGoal.get(e)-1):console.error("Actor managed to sell something it didn't plan to sell.")}onSuccessfulBuy(e){this.buyGoal.has(e)?this.buyGoal.set(e,this.buyGoal.get(e)-1):console.error("Actor managed to buy something it didn't plan to buy.")}updatePriceExpectationsBasedOnGoals(){for(let e of this.buyGoal)e[1]>0?this.changeExpectedPrice(e[0],r.Config.priceVolatilityFactor):this.changeExpectedPrice(e[0],-r.Config.priceVolatilityFactor);for(let e of this.sellGoal)e[1]>0?this.changeExpectedPrice(e[0],-r.Config.priceVolatilityFactor):this.changeExpectedPrice(e[0],r.Config.priceVolatilityFactor)}expectedPrice(e){return this.expectedMarketPrices.get(e)}setExpectedPrice(e,t){this.expectedMarketPrices.set(e,t)}changeExpectedPrice(e,t){let i=this.expectedPrice(e)+t;i<=r.Config.lowestPossiblePrice&&(i=r.Config.lowestPossiblePrice),this.setExpectedPrice(e,i)}}},958:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Firm=void 0;const s=i(49),r=i(10),n=i(535),o=i(201),a=i(385),l=i(173);class c extends s.EconomicActor{constructor(e,t,i,s,a,l,c){super(),this.maxCapacity=250,this.lastProduction=0,this.productionOffset=0,this.borrowedMoney=0;for(let e of r.Good.values)this.setExpectedPrice(e,o.Config.baseLabourValue);this.id=e,this.inventory=n.Basket.firmInitialInventory(),this.baseRecipe=t,this.recipe=t,this.startingTier=i,this.tier=i,this.finalTier=s,this.consumesCoal=a,this.consumesElectricity=l,this.maxCapacity=c,this.inventory.set(this.recipe.output,this.recipe.outputQuantity*this.maxCapacity)}get recipeCost(){let e=0;for(let t of this.recipe.inputs)e+=this.expectedPrice(t[0])*t[1];return e}calculateProductionGoal(){return e=this.maxCapacity-this.inventory.get(this.recipe.output)/this.recipe.outputQuantity+this.productionOffset,0,t=this.maxCapacity,Math.min(Math.max(e,0),t);var e,t}setBuyGoals(e){for(let e of this.buyGoal.keys())this.buyGoal.set(e,0);if(!Array.from(this.recipe.inputs.keys()).every((t=>e.markets.has(t))))return;let t=this.calculateProductionGoal();for(let e of this.recipe.inputs)this.buyGoal.set(e[0],Math.floor(e[1]*t)-this.inventory.get(e[0]))}placeBuyOrders(e){this.setBuyGoals(e);let t=0;for(let e of this.buyGoal)t+=this.expectedPrice(e[0])*e[1];0==t&&(t=1);for(let i of this.buyGoal){let s=this.expectedPrice(i[0])/t,r=new a.Order(this,i[0],Math.max(this.inventory.money*s,0));for(let t=0;t<i[1];t++)e.placeBuyOrder(r)}}setSellGoals(e){this.sellGoal=new Map,this.sellGoal.set(this.recipe.output,Math.floor(this.inventory.get(this.recipe.output)))}consumeGoods(){for(this.lastProduction=0;this.recipe.canApply(this.inventory)&&this.lastProduction<this.maxCapacity;)this.recipe.apply(this.inventory),this.lastProduction++}onSuccessfulSale(e){super.onSuccessfulSale(e),this.inventory.addGood(e,-1)}updatePriceExpectationsBasedOnGoals(){for(let e of this.sellGoal)e[1]>0?this.productionOffset-=o.Config.productionGoalVolatility:this.productionOffset+=o.Config.productionGoalVolatility}borrowMoneyFromDemand(e){this.borrowedMoney=0,e.markets.has(this.recipe.output)&&0==this.lastProduction&&(this.borrowedMoney=e.markets.get(this.recipe.output).buyOrders.map((e=>e.offerPrice)).reduce(((e,t)=>e+t),0),this.inventory.money+=this.borrowedMoney)}returnMoneyFromDemand(){this.inventory.money-=this.borrowedMoney}setTier(e){this.tier=e,this.recipe=this.baseRecipe.copy();for(let t of this.recipe.inputs)r.Good.isLabour(t[0])&&this.recipe.inputs.set(t[0],t[1]/l.FirmTier.efficiencyMultiplier(e));this.recipe.outputQuantity*=l.FirmTier.efficiencyMultiplier(e),this.tier==l.FirmTier.Industrial&&this.consumesCoal&&this.recipe.inputs.set(r.Good.Coal,l.FirmTier.efficiencyMultiplier(this.tier)),this.tier==l.FirmTier.Advanced&&this.consumesElectricity&&this.recipe.inputs.set(r.Good.Electricity,l.FirmTier.efficiencyMultiplier(this.tier))}}t.Firm=c},412:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Government=void 0;const s=i(49),r=i(10),n=i(385),o=i(201);class a extends s.EconomicActor{constructor(){super();for(let e of r.Good.values)this.setExpectedPrice(e,o.Config.baseLabourValue)}consumeGoods(){}setBuyGoals(e){}setSellGoals(e){}addBuyGoal(e,t){this.buyGoal.has(e)?this.buyGoal.set(e,this.buyGoal.get(e)+t):this.buyGoal.set(e,t)}placeBuyOrders(e){let t=this.inventory.money;for(let i of this.buyGoal){let s=new n.Order(this,i[0],this.expectedPrice(i[0]));for(let r=0;r<i[1]&&t>this.expectedPrice(i[0]);r++)e.placeBuyOrder(s),t-=this.expectedPrice(i[0])}}}t.Government=a},143:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Individual=void 0;const s=i(10),r=i(685),n=i(535),o=i(201),a=i(49),l=i(385);function c(e){return Math.log2(e+1)}class u extends a.EconomicActor{constructor(){super(),this.personalValues=new Map,this.productivity=new Map,this.preferences=[],this.mostProductiveLabour=s.Good.Farming,this.job=s.Good.Farming,this.lastUtility=50;for(let e of s.Good.values)this.personalValues.set(e,s.Good.getBaseUtility(e)*Math.max(0,(0,r.gaussianRandom)(1,o.Config.personalUtilityMultiplierStandardDeviation))),this.setExpectedPrice(e,this.personalValues.get(e)),this.moneyValue=o.Config.baseMoneyValue*Math.max(.1,(0,r.gaussianRandom)(1,o.Config.personalUtilityMultiplierStandardDeviation));for(let e of s.Good.labourTypes)this.expectedMarketPrices.set(e,o.Config.baseLabourValue),this.productivity.set(e,o.Config.baseLabourOutput*Math.max(.1,(0,r.gaussianRandom)(1,o.Config.labourOutputUtilityMultiplierStandardDeviation)));this.inventory=n.Basket.individualInitialInventory()}utilityOf(e){let t=0;for(let i of s.Good.values)t+=this.personalValues.get(i)*c(e.get(i));return t+=this.moneyValue*c(e.money),t}willingAndAbleToBuy(e,t,i){return e.goodsSold.some((e=>e==i&&this.personalValues.get(e)>0&&t.money>this.expectedPrice(e)))}decideSpendingBasket(e){let t={basket:this.inventory,marginalMoneyEfficiency:this.utilityOf(this.inventory)},i=t;for(;e.goodsSold.some((i=>this.willingAndAbleToBuy(e,t.basket,i)));)i=e.goodsSold.filter((i=>this.willingAndAbleToBuy(e,t.basket,i))).map((e=>{let i=t.basket.copy();return i.addGood(e),i.money-=this.expectedPrice(e),{basket:i,marginalMoneyEfficiency:(this.utilityOf(i)-this.utilityOf(t.basket))/this.expectedPrice(e)}})).reduce(((e,t)=>e.marginalMoneyEfficiency>t.marginalMoneyEfficiency?e:t)),t=i;let s=Array.from(t.basket.keys()).map((e=>({good:e,utility:c(t.basket.get(e))*this.personalValues.get(e)}))).sort(((e,t)=>t.utility-e.utility)).filter((e=>e.utility>0)).map((e=>e.good));return this.preferences=s.slice(0,Math.min(3,s.length)),t.basket}setSellGoals(e){let t=s.Good.labourTypes.map((e=>({labour:e,expectedIncome:this.expectedPrice(e)*this.productivity.get(e)}))).reduce(((e,t)=>e.expectedIncome>t.expectedIncome?e:t)).labour;this.sellGoal=new Map([[t,Math.floor(this.productivity.get(t))]]),this.mostProductiveLabour=Array.from(this.productivity.keys()).reduce(((e,t)=>this.productivity.get(e)>this.productivity.get(t)?e:t)),this.job=t}placeSellOrders(e){this.setSellGoals(e);for(let t of this.sellGoal){let i=new l.Order(this,t[0],1/this.productivity.get(t[0]));for(let s=0;s<t[1];s++)e.placeSellOrder(i)}}setBuyGoals(e){this.buyGoal=new Map;for(let t of this.decideSpendingBasket(e))t[1]>0&&this.buyGoal.set(t[0],t[1])}onSuccessfulSale(e){super.onSuccessfulSale(e),this.productivity.has(e)&&this.productivity.get(e)}consumeGoods(){this.lastUtility=this.utilityOf(this.inventory);for(let e of this.inventory.keys())this.inventory.set(e,0)}calculateInventoryValue(){return Array.from(this.inventory.entries()).map((e=>s.Good.getBaseUtility(e[0])*e[1])).reduce(((e,t)=>e+t),0)}}t.Individual=u},217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Recipe=void 0;class i{constructor(e,t,i){this.inputs=new Map,this.inputs=e,this.output=t,this.outputQuantity=i}copy(){return new i(this.inputs,this.output,this.outputQuantity)}canApply(e){return Array.from(this.inputs.keys()).every((t=>e.get(t)>=this.inputs.get(t)))}apply(e){for(let t of this.inputs)e.addGood(t[0],-t[1]);e.addGood(this.output,this.outputQuantity)}}t.Recipe=i},535:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Basket=void 0;const s=i(10),r=i(201);class n extends Map{constructor(){super(),this.money=0;for(let e of s.Good.values)this.set(e,0)}static withItems(e){let t=new n;for(let i of e)t.set(i[0],i[1]);return t}static individualInitialInventory(){let e=new n;return e.money=r.Config.initialMoneyPerIndividual,e}static firmInitialInventory(){let e=new n;return e.money=r.Config.initialMoneyPerFirm,e}addGood(e,t=1){this.set(e,this.get(e)+t)}subtract(e){let t=this.copy();for(let i of e)t.has(i[0])?t.addGood(i[0],-i[1]):t.set(i[0],-i[1]);return t}subtractMut(e){for(let t of e)this.has(t[0])?this.addGood(t[0],-t[1]):this.set(t[0],-t[1])}hasNegatives(){return Array.from(this.values()).some((e=>e<0))}copy(){let e=new n;e.money=this.money;for(let t of s.Good.values)e.set(t,this.get(t));return e}}t.Basket=n},201:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0,(i=t.Config||(t.Config={})).personalUtilityMultiplierStandardDeviation=.25,i.baseLabourValue=10,i.baseMoneyValue=1,i.baseLabourOutput=5,i.labourOutputUtilityMultiplierStandardDeviation=.1,i.priceVolatilityFactor=.2,i.gossipInfluence=.1,i.actorAmount=100,i.initialMoneyPerIndividual=100,i.initialMoneyPerFirm=0,i.specialisationFactor=.1,i.lowestPossiblePrice=.01,i.productionGoalVolatility=5,i.firmTrackDays=5,i.upgradeMultiplier=1.58,i.dataMemory=300,i.graphConfigs={showPoint:!1,lineSmooth:!1,axisX:{showGrid:!1}},i.governmentIncomeModifier=.2},173:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmTier=void 0;const s=i(201),r=i(10),n=i(535);var o;(o=t.FirmTier||(t.FirmTier={}))[o.Manual=0]="Manual",o[o.Basic=1]="Basic",o[o.Industrial=2]="Industrial",o[o.Advanced=3]="Advanced",function(e){function t(t){switch(t){case e.Manual:return 0;case e.Basic:return 1;case e.Industrial:return 2;case e.Advanced:return 3}}e.values=[e.Manual,e.Basic,e.Industrial,e.Advanced],e.next=function(t){switch(t){case e.Manual:return e.Basic;case e.Basic:return e.Industrial;case e.Industrial:return e.Advanced;case e.Advanced:return null}},e.tier=t,e.icon=function(t){switch(t){case e.Manual:return r.Good.Assembly;case e.Basic:return r.Good.BasicEquipment;case e.Industrial:return r.Good.IndustrialEquipment;case e.Advanced:return r.Good.AdvancedEquipment}},e.efficiencyMultiplier=function(e){return Math.pow(s.Config.upgradeMultiplier,t(e))},e.cost=function(t){switch(t){case e.Manual:return null;case e.Basic:return n.Basket.withItems(new Map([[r.Good.BasicEquipment,250]]));case e.Industrial:return n.Basket.withItems(new Map([[r.Good.IndustrialEquipment,250]]));case e.Advanced:return n.Basket.withItems(new Map([[r.Good.AdvancedEquipment,250]]))}},e.name=function(t){switch(t){case e.Manual:return"Manual";case e.Basic:return"Basic";case e.Industrial:return"Industrial";case e.Advanced:return"Advanced"}}}(t.FirmTier||(t.FirmTier={}))},10:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Good=void 0;const s=i(173);var r;(r=t.Good||(t.Good={})).Coal="coal",r.Oil="oil",r.Wood="wood",r.Mineral="mineral",r.PreciousMineral="precious_mineral",r.Rocks="rock",r.Crop="crop",r.Fruit="fruit",r.Milk="milk",r.Wool="wool",r.Meat="meat",r.Mining="mining",r.Farming="farming",r.Technical="technical",r.Forestry="forestry",r.Artisan="artisan",r.Assembly="assembly",r.BasicEquipment="basic_tools",r.IndustrialEquipment="industrial_tools",r.AdvancedEquipment="advanced_tools",r.MobileEquipment="mobile_tools",r.Fertilizer="fertilizer",r.Electricity="electricity",r.ProcessedWood="processed_wood",r.Chemicals="chemicals",r.Metal="metal",r.PreciousMetal="precious_metal",r.Motor="motor",r.Circuit="circuit",r.MachineParts="machine_parts",r.Textile="textile",r.Flour="flour",r.Clothes="clothes",r.ProcessedMeat="processed_meat",r.ProcessedFruit="processed_fruit",r.ProcessedVegetables="processed_vegetables",r.Dairy="dairy",r.Baked="baked",r.LuxuryFood="luxury_food",r.Furniture="furniture",r.LuxuryFurniture="luxury_furniture",r.Appliance="appliance",r.SmartAppliance="smart_appliance",r.Electronics="electronics",r.Automobiles="automobiles",function(e){e.values=[e.Coal,e.Oil,e.Wood,e.Mineral,e.PreciousMineral,e.Rocks,e.Crop,e.Fruit,e.Milk,e.Wool,e.Meat,e.Mining,e.Farming,e.Technical,e.Forestry,e.Artisan,e.Assembly,e.BasicEquipment,e.IndustrialEquipment,e.AdvancedEquipment,e.MobileEquipment,e.Electricity,e.ProcessedWood,e.Chemicals,e.Metal,e.PreciousMetal,e.Motor,e.Circuit,e.MachineParts,e.Textile,e.Flour,e.Clothes,e.ProcessedMeat,e.ProcessedFruit,e.ProcessedVegetables,e.Dairy,e.Baked,e.LuxuryFood,e.Furniture,e.LuxuryFurniture,e.Appliance,e.SmartAppliance,e.Electronics,e.Automobiles],e.labourTypes=[e.Mining,e.Farming,e.Technical,e.Forestry,e.Artisan,e.Assembly],e.getBaseUtility=function(t){switch(t){case e.Crop:return 10;case e.Milk:return 25;case e.Meat:return 30;case e.Clothes:return 35;case e.ProcessedMeat:return 20;case e.ProcessedVegetables:return 7;case e.Dairy:return 60;case e.Baked:return 25;case e.LuxuryFood:case e.Furniture:return 100;case e.LuxuryFurniture:return 300;case e.Appliance:return 200;case e.SmartAppliance:return 500;case e.Electronics:return 300;case e.Automobiles:return 600;default:return 0}},e.isLabour=function(t){switch(t){case e.Mining:case e.Farming:case e.Technical:case e.Forestry:case e.Artisan:case e.Assembly:return!0;default:return!1}},e.name=function(t){switch(t){case e.Coal:return"Coal";case e.Oil:return"Oil";case e.Wood:return"Wood";case e.Mineral:return"Mineral";case e.PreciousMineral:return"Precious Mineral";case e.Rocks:return"Rock";case e.Crop:return"Crop";case e.Fruit:return"Fruit";case e.Milk:return"Milk";case e.Wool:return"Wool";case e.Meat:return"Meat";case e.Mining:return"Mining";case e.Farming:return"Farming";case e.Technical:return"Technical";case e.Forestry:return"Forestry";case e.Artisan:return"Artisan";case e.Assembly:return"Assembly";case e.BasicEquipment:return"Basic Equipment";case e.IndustrialEquipment:return"Industrial Equipment";case e.AdvancedEquipment:return"Advanced Equipment";case e.MobileEquipment:return"Mobile Equipment";case e.Fertilizer:return"Fertilizer";case e.Electricity:return"Electricity";case e.ProcessedWood:return"Processed Wood";case e.Chemicals:return"Chemicals";case e.Metal:return"Metal";case e.PreciousMetal:return"Precious Metal";case e.Motor:return"Motor";case e.Circuit:return"Circuit";case e.MachineParts:return"Machine Parts";case e.Textile:return"Textile";case e.Flour:return"Flour";case e.Clothes:return"Clothes";case e.ProcessedMeat:return"Processed Meat";case e.ProcessedFruit:return"Processed Fruit";case e.ProcessedVegetables:return"Processed Vegetables";case e.Dairy:return"Dairy";case e.Baked:return"Baked";case e.LuxuryFood:return"Luxury Food";case e.Furniture:return"Furniture";case e.LuxuryFurniture:return"Luxury Furniture";case e.Appliance:return"Appliance";case e.SmartAppliance:return"Smart Appliance";case e.Electronics:return"Electronics";case e.Automobiles:return"Automobiles"}},e.getTier=function(t){switch(t){case e.Coal:case e.Oil:case e.Wood:case e.Mineral:case e.PreciousMineral:case e.Rocks:case e.Crop:case e.Fruit:case e.Milk:case e.Wool:case e.Meat:case e.Mining:case e.Farming:case e.Technical:case e.Forestry:case e.Artisan:case e.Assembly:case e.BasicEquipment:case e.ProcessedWood:case e.Dairy:case e.Baked:case e.Flour:case e.LuxuryFood:case e.LuxuryFurniture:return s.FirmTier.Manual;case e.Electricity:case e.IndustrialEquipment:case e.Metal:case e.MachineParts:case e.Textile:case e.Clothes:case e.Furniture:return s.FirmTier.Basic;case e.Chemicals:case e.PreciousMetal:case e.Motor:case e.Circuit:case e.Fertilizer:case e.AdvancedEquipment:case e.ProcessedMeat:case e.ProcessedFruit:case e.ProcessedVegetables:case e.Appliance:return s.FirmTier.Industrial;case e.SmartAppliance:case e.Electronics:case e.Automobiles:case e.MobileEquipment:return s.FirmTier.Advanced}}}(t.Good||(t.Good={}))},93:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Market=void 0;const s=i(201);var r=s.Config.dataMemory;t.Market=class{constructor(e){this.buyOrders=[],this.sellOrders=[],this.currentExchangePrice=s.Config.baseLabourValue,this.currentExchangeQuantity=0,this.exchangeQuantityHistory=[],this.exchangePriceHistory=[],this.good=e}placeBuyOrder(e){this.buyOrders.push(e)}placeSellOrder(e){this.sellOrders.push(e)}process(){this.buyOrders.sort(((e,t)=>t.offerPrice-e.offerPrice)),this.sellOrders.sort(((e,t)=>e.offerPrice-t.offerPrice));let e=Math.min(this.buyOrders.length,this.sellOrders.length),t=[];for(let i=0;i<e;i++){let e=this.buyOrders[i],s=this.sellOrders[i],r=e.offerPrice;e.source.inventory.addGood(e.good),e.source.inventory.money-=r,s.source.inventory.money+=r,s.source.onSuccessfulSale(this.good),e.source.onSuccessfulBuy(this.good),t.push(r)}this.currentExchangeQuantity=t.length,e>0?t.length>0?this.currentExchangePrice=t.reduce(((e,t)=>e+t),0)/t.length:this.currentExchangePrice=(this.buyOrders.reduce(((e,t)=>e+t.offerPrice),0)+this.sellOrders.reduce(((e,t)=>e+t.offerPrice),0))/(this.buyOrders.length+this.sellOrders.length):this.buyOrders.length>0?this.currentExchangePrice=this.buyOrders.reduce(((e,t)=>e.offerPrice>t.offerPrice?e:t)).offerPrice:this.sellOrders.length>0?this.currentExchangePrice=this.sellOrders.reduce(((e,t)=>e.offerPrice>t.offerPrice?e:t)).offerPrice:this.currentExchangePrice=0,this.recordData(),this.buyOrders=[],this.sellOrders=[]}recordData(){this.exchangeQuantityHistory.push(this.currentExchangeQuantity),this.exchangeQuantityHistory.length>r&&this.exchangeQuantityHistory.shift(),this.exchangePriceHistory.push(this.currentExchangePrice),this.exchangePriceHistory.length>r&&this.exchangePriceHistory.shift()}get recentExchangePrice(){let e=Math.min(this.exchangePriceHistory.length,10);return this.exchangePriceHistory.slice(-e).reduce(((e,t)=>e+t),0)/e}}},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Order=void 0,t.Order=class{constructor(e,t,i){this.source=e,this.good=t,this.offerPrice=i}}},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Simulation=void 0;const s=i(10),r=i(93),n=i(201),o=i(143),a=i(958),l=i(217),c=i(173),u=i(894),d=i(412);class h extends u.Widget{constructor(){super("div"),this.government=new d.Government,this.individuals=[],this.resources=[],this.factories=[],this.markets=new Map,this.timeElapsed=0,this.currentRealGDP=0,this.realGDPHistory=[],this.labourFactor=1,this.resourcesFactor=0,this.physicalCapitalFactor=0,this.humanCapitalFactor=0,this.technologyFactor=0;for(let e=0;e<n.Config.actorAmount;e++)this.individuals.push(new o.Individual);this.resources.push(new a.Firm("Crop Farm",new l.Recipe(new Map([[s.Good.Farming,1]]),s.Good.Crop,5),c.FirmTier.Manual,c.FirmTier.Advanced,!1,!1,250)),this.resources.push(new a.Firm("Meat Farm",new l.Recipe(new Map([[s.Good.Crop,1],[s.Good.Farming,1]]),s.Good.Meat,1),c.FirmTier.Manual,c.FirmTier.Advanced,!1,!1,250))}get goodsSold(){return Array.from(this.markets.keys())}getAllActors(){return[].concat(this.individuals).concat(this.resources).concat(this.factories)}getAllFirms(){return[].concat(this.resources).concat(this.factories)}placeBuyOrder(e){this.markets.has(e.good)?this.markets.get(e.good).placeBuyOrder(e):console.error(`Misplaced buy order on ${e.good}.`)}placeSellOrder(e){if(this.markets.has(e.good))this.markets.get(e.good).placeSellOrder(e);else{let t=new r.Market(e.good);t.placeSellOrder(e),this.markets.set(e.good,t)}}tick(){let e=this.getAllActors();for(let e of this.individuals)e.placeBuyOrders(this);this.government.placeBuyOrders(this);for(let e of this.getAllFirms())e.borrowMoneyFromDemand(this),e.placeBuyOrders(this),e.returnMoneyFromDemand();for(let t of e)t.placeSellOrders(this);for(let e of this.markets.values())e.process();this.recordGDP(),this.awardMoney(),this.determineFactorsOfProduction();for(let t of e)t.updatePriceExpectationsBasedOnGoals(),t.consumeGoods();this.government.updatePriceExpectationsBasedOnGoals(),this.gossip(),this.timeElapsed++}recordGDP(){this.currentRealGDP=this.individuals.map((e=>e.calculateInventoryValue())).reduce(((e,t)=>e+t),0),this.realGDPHistory.push(this.currentRealGDP),this.realGDPHistory.length>n.Config.dataMemory&&this.realGDPHistory.shift()}awardMoney(){this.government.inventory.money+=this.currentRealGDP/n.Config.actorAmount*n.Config.governmentIncomeModifier}determineFactorsOfProduction(){this.labourFactor=1,this.resourcesFactor=this.resources.length/11,this.physicalCapitalFactor=this.getAllFirms().map((e=>c.FirmTier.tier(e.tier)+1)).reduce(((e,t)=>e+t),0)/152,this.humanCapitalFactor=Math.min(1,this.individuals.map((e=>e.productivity.get(e.mostProductiveLabour)-n.Config.baseLabourOutput)).reduce(((e,t)=>e+t),0)/(n.Config.actorAmount*n.Config.baseLabourOutput)),this.technologyFactor=c.FirmTier.tier(Array.from(this.markets.keys()).map((e=>s.Good.getTier(e))).reduce(((e,t)=>c.FirmTier.tier(e)>c.FirmTier.tier(t)?e:t),c.FirmTier.Manual))/3}gossip(){for(let e of this.markets.values()){let t=e.recentExchangePrice;for(let t of this.individuals)s.Good.isLabour(e.good)?t.changeExpectedPrice(e.good,Math.sign(e.currentExchangePrice-t.expectedPrice(e.good))*n.Config.gossipInfluence*2):t.changeExpectedPrice(e.good,Math.sign(e.currentExchangePrice-t.expectedPrice(e.good))*n.Config.gossipInfluence);for(let i of this.getAllFirms())i.changeExpectedPrice(e.good,(t-i.expectedPrice(e.good))*n.Config.priceVolatilityFactor*2);this.government.changeExpectedPrice(e.good,Math.sign(e.currentExchangePrice-this.government.expectedPrice(e.good))*n.Config.gossipInfluence)}}updateElement(e){throw new Error("Method not implemented.")}}t.Simulation=h},553:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmBlueprint=void 0;const s=i(173),r=i(217),n=i(535),o=i(958),a=i(10);class l{constructor({id:e,startingTier:t=s.FirmTier.Manual,finalTier:i=s.FirmTier.Advanced,recipe:r,consumesCoal:n=!1,consumesElectricity:o=!0,cost:a,capacity:l=250}){this.firmID=e,this.startingTier=t,this.finalTier=i,this.recipe=r,this.consumesCoal=n,this.consumesElectricity=o,this.cost=a,this.capacity=l}createFirm(){return new o.Firm(this.firmID,this.recipe.copy(),this.startingTier,this.finalTier,this.consumesCoal,this.consumesElectricity,this.capacity)}}l.mineSetupCost=n.Basket.withItems(new Map([[a.Good.Mining,1e3]])),l.farmSetupCost=n.Basket.withItems(new Map([[a.Good.Farming,1e3],[a.Good.Crop,1e3],[a.Good.Wood,1e3]])),l.forestSetupCost=n.Basket.withItems(new Map([[a.Good.Forestry,1e3]])),l.workshopSetupCost=n.Basket.withItems(new Map([[a.Good.Assembly,1e3],[a.Good.Wood,1e3]])),l.basicSetupCost=n.Basket.withItems(new Map([[a.Good.BasicEquipment,250],[a.Good.Assembly,1e3],[a.Good.Wood,1e3]])),l.factorySetupCost=n.Basket.withItems(new Map([[a.Good.IndustrialEquipment,250],[a.Good.Assembly,1e3],[a.Good.Wood,2e3]])),l.advancedFactorySetupCost=n.Basket.withItems(new Map([[a.Good.AdvancedEquipment,250],[a.Good.Assembly,1e3],[a.Good.Wood,3e3],[a.Good.Rocks,3e3]])),l.resourcesBlueprints=[new l({id:"Coal Mine",recipe:new r.Recipe(new Map([[a.Good.Mining,1]]),a.Good.Coal,5),cost:l.mineSetupCost}),new l({id:"Mine",recipe:new r.Recipe(new Map([[a.Good.Mining,1]]),a.Good.Mineral,5),cost:l.mineSetupCost}),new l({id:"Gold Mine",recipe:new r.Recipe(new Map([[a.Good.Mining,1]]),a.Good.PreciousMetal,3),cost:l.mineSetupCost}),new l({id:"Oil Field",recipe:new r.Recipe(new Map([[a.Good.Mining,1]]),a.Good.Oil,4),cost:l.mineSetupCost}),new l({id:"Wool Farm",recipe:new r.Recipe(new Map([[a.Good.Farming,1],[a.Good.Crop,1]]),a.Good.Wool,2),cost:l.farmSetupCost}),new l({id:"Dairy Farm",recipe:new r.Recipe(new Map([[a.Good.Farming,1],[a.Good.Crop,1]]),a.Good.Milk,1),cost:l.farmSetupCost}),new l({id:"Forest",recipe:new r.Recipe(new Map([[a.Good.Forestry,1]]),a.Good.Wood,5),cost:l.forestSetupCost})],l.factoryBlueprints=[new l({id:"Equipment Workshop",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.ProcessedWood,5]]),a.Good.BasicEquipment,1),cost:l.workshopSetupCost}),new l({id:"Equipment Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.BasicEquipment,1],[a.Good.MachineParts,5]]),a.Good.IndustrialEquipment,1),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Machine Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.IndustrialEquipment,1],[a.Good.Circuit,1]]),a.Good.AdvancedEquipment,1),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Coal Plant",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Coal,10]]),a.Good.Electricity,50),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Wind Plant",recipe:new r.Recipe(new Map([[a.Good.Technical,1]]),a.Good.Electricity,80),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost,capacity:50}),new l({id:"Solar Plant",recipe:new r.Recipe(new Map([[a.Good.Technical,1]]),a.Good.Electricity,80),startingTier:s.FirmTier.Advanced,cost:l.advancedFactorySetupCost,capacity:50}),new l({id:"Carpentry Workshop",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Wood,5]]),a.Good.ProcessedWood,5),cost:l.workshopSetupCost}),new l({id:"Chemical Plant",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Oil,4]]),a.Good.Chemicals,4),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Forge",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Mineral,5],[a.Good.Coal,1]]),a.Good.Metal,5),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Advanced Forge",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.PreciousMineral,3],[a.Good.Coal,1]]),a.Good.PreciousMetal,3),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Motor Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.MachineParts,1],[a.Good.PreciousMetal,1]]),a.Good.Motor,2),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Circuits Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.PreciousMetal,1],[a.Good.Chemicals,1]]),a.Good.Circuit,1),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Machine Parts Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Metal,3]]),a.Good.MachineParts,5),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Textile Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Wool,2]]),a.Good.Textile,2),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Flour Mill",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Crop,3]]),a.Good.Flour,3),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Clothes Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Textile,2]]),a.Good.Clothes,2),startingTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Meat Processing Plant",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Meat,1],[a.Good.Chemicals,1]]),a.Good.ProcessedMeat,3),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Crop Processing Plant",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Crop,1],[a.Good.Chemicals,1]]),a.Good.ProcessedVegetables,3),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Dairy Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Milk,1]]),a.Good.Dairy,3),startingTier:s.FirmTier.Manual,cost:l.workshopSetupCost}),new l({id:"Bakery",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Flour,1]]),a.Good.Baked,2),startingTier:s.FirmTier.Manual,cost:l.workshopSetupCost}),new l({id:"Restaurant",recipe:new r.Recipe(new Map([[a.Good.Artisan,1],[a.Good.Meat,1],[a.Good.Crop,1]]),a.Good.LuxuryFood,1),startingTier:s.FirmTier.Manual,finalTier:s.FirmTier.Manual,cost:l.workshopSetupCost}),new l({id:"Furniture Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.ProcessedWood,1]]),a.Good.Furniture,1),finalTier:s.FirmTier.Basic,cost:l.basicSetupCost}),new l({id:"Luxury Furniture Workshop",recipe:new r.Recipe(new Map([[a.Good.Artisan,1],[a.Good.ProcessedWood,1],[a.Good.PreciousMetal,1]]),a.Good.LuxuryFurniture,1),startingTier:s.FirmTier.Manual,finalTier:s.FirmTier.Manual,cost:l.workshopSetupCost}),new l({id:"Appliance Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.MachineParts,2]]),a.Good.Appliance,1),startingTier:s.FirmTier.Industrial,cost:l.factorySetupCost}),new l({id:"Smart Appliance Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Appliance,1],[a.Good.Circuit,1]]),a.Good.SmartAppliance,1),startingTier:s.FirmTier.Advanced,cost:l.advancedFactorySetupCost}),new l({id:"Electronics Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Circuit,2]]),a.Good.Electronics,1),startingTier:s.FirmTier.Advanced,cost:l.advancedFactorySetupCost}),new l({id:"Automobile Factory",recipe:new r.Recipe(new Map([[a.Good.Assembly,1],[a.Good.Circuit,2],[a.Good.Motor,2]]),a.Good.Automobiles,1),startingTier:s.FirmTier.Advanced,cost:l.advancedFactorySetupCost})],t.FirmBlueprint=l},685:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.gaussianRandom=void 0,t.gaussianRandom=function(e,t){let i=1-Math.random(),s=Math.random();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*s)*t+e}},109:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialIcon=t.GameIconButton=t.GameIcon=t.Span=t.Div=void 0;const s=i(710);class r extends s.ElementBuilder{static simple(e,t){return new r({text:e,styleClasses:t})}constructor({styleClasses:e=[],children:t=[],text:i="",href:s="",title:r="",onclick:n}){super({tag:"div",styleClasses:e,children:t,text:i,href:s,title:r,onclick:n})}}t.Div=r;class n extends s.ElementBuilder{static simple(e,t){return new n({text:e,styleClasses:t})}constructor({styleClasses:e=[],children:t=[],text:i="",href:s="",title:r="",onclick:n}){super({tag:"span",styleClasses:e,children:t,text:i,href:s,title:r,onclick:n})}}t.Span=n;class o extends s.ElementBuilder{constructor(e,{styleClasses:t=[],children:i=[],href:s="",title:r="",onclick:n}={}){super({tag:"div",styleClasses:["green-line",...t],children:i,text:e,href:s,title:r,onclick:n})}}t.GameIcon=o;class a extends s.ElementBuilder{constructor(e,{styleClasses:t=[],children:i=[],href:s="",title:r="",onclick:n}={}){super({tag:"button",styleClasses:["green-line",...t],children:i,text:e,href:s,title:r,onclick:n})}}t.GameIconButton=a;class l extends s.ElementBuilder{constructor(e,{styleClasses:t=[],children:i=[],href:s="",title:r="",onclick:n}={}){super({tag:"div",styleClasses:["material-icons",...t],children:i,text:e,href:s,title:r,onclick:n})}}t.MaterialIcon=l},710:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementBuilder=void 0,t.ElementBuilder=class{constructor({tag:e,namespace:t="http://www.w3.org/1999/xhtml",styleClasses:i=[],children:s=[],text:r="",href:n="",title:o="",onclick:a}){this.attributes=new Map,this.styleRules=new Map,this.eventListeners=new Map,this.tag=e,this.namespace=t,this.styleClasses=i,this.children=s,this.text=r,this.href=n,this.title=o,this.onclick=a}withStyleClasses(...e){return e.forEach((e=>this.styleClasses.push(e))),this}withAttribute(e,t){return this.attributes.set(e,t),this}withEventListener(e,t){return this.eventListeners.set(e,t),this}build(){const e=document.createElementNS(this.namespace,this.tag);return this.styleClasses.forEach((t=>e.classList.add(t))),this.children.forEach((t=>{e.appendChild(t)})),this.text&&e.appendChild(document.createTextNode(this.text)),this.href&&e.setAttribute("href",this.href),this.title&&e.setAttribute("title",this.title),this.onclick&&e.addEventListener("click",this.onclick),this.attributes.forEach(((t,i)=>e.setAttribute(i,t))),e instanceof HTMLElement&&this.styleRules.forEach(((t,i)=>e.style.setProperty(i,t))),this.eventListeners.forEach(((t,i)=>e.addEventListener(i,t))),e}}},969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=i(894),r=i(377),n=i(540),o=i(384);class a extends s.Widget{constructor(){super("div","app"),this.mainMenu=new r.MainMenu(this),this.tutorial=new o.Tutorial(this),this.game=new n.Game,this.domElement.append(this.mainMenu.domElement)}play(){this.clearElement(),this.domElement.append(this.game.domElement)}openTutorial(){this.clearElement(),this.domElement.append(this.tutorial.domElement)}menu(){this.clearElement(),this.domElement.append(this.mainMenu.domElement)}updateElement(e){}}t.App=a},232:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmBlueprintWidget=void 0;const s=i(54),r=i(109),n=i(710),o=i(295);class a extends s.GameWidget{constructor(e,t,i){super(e,"div","factory"),this.blueprint=t,this.overlay=i,this.domElement.append(r.Div.simple("",["background"]).build(),new r.Div({styleClasses:["overlay"],children:[new r.Div({styleClasses:["content"],children:[new r.Div({styleClasses:["io"],children:Array.from(t.recipe.inputs.keys()).map((e=>new r.GameIcon(e).build()))}).build(),new r.Div({styleClasses:["fill","info"],children:[new r.Div({styleClasses:["top"],children:[r.Div.simple(t.firmID,["name"]).build()]}).build(),new r.Div({styleClasses:["actions"],children:[new n.ElementBuilder({tag:"button",styleClasses:["primary"],text:"Build",onclick:()=>{e.openActionMenu(new o.OverlayActionMenu(e,`Build ${t.firmID}`,t.cost,(()=>{i.target.push(t.createFirm()),i.removeBlueprint(this)})))}}).build()]}).build()]}).build(),new r.Div({styleClasses:["io"],children:[new r.GameIcon(this.blueprint.recipe.output).build()]}).build()]}).build()]}).build())}gameTick(){}updateElement(e){}}t.FirmBlueprintWidget=a},162:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmConstructionMenu=void 0;const s=i(232),r=i(109),n=i(54),o=i(710);class a extends n.GameWidget{constructor(e,t,i){super(e,"div","construct"),this.container=r.Div.simple("",["options"]).build(),this.target=i,this.blueprints=t.map((t=>new s.FirmBlueprintWidget(e,t,this))),this.domElement.append(r.Div.simple("Construct",["message"]).build(),this.container,new r.Div({styleClasses:["actions"],children:[new o.ElementBuilder({tag:"button",styleClasses:["primary","material-icons"],text:"close",onclick:()=>{e.dismissConstructionMenu()}}).build()]}).build()),this.container.append(...this.blueprints.map((e=>e.domElement)))}removeBlueprint(e){this.blueprints.splice(this.blueprints.indexOf(e),1),this.container.removeChild(e.domElement)}gameTick(){}updateElement(e){}}t.FirmConstructionMenu=a},299:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmWidget=void 0;const s=i(109),r=i(173),n=i(710),o=i(54),a=i(295),l=i(535);class c extends o.GameWidget{constructor(e,t){super(t,"div","factory"),this.inputs=s.Div.simple("",["io"]).build(),this.outputs=s.Div.simple("",["io"]).build(),this.upgradeStatus=s.Div.simple("",[]).build(),this.capacityBar=s.Div.simple("",["capacity-bar"]).build(),this.errorButton=s.Div.simple("",["error","material-icons"]).build(),this.firm=e,this.game=t,this.upgradeButton=new n.ElementBuilder({tag:"button",styleClasses:["tertiary"],text:"Upgrade",onclick:()=>{let e=r.FirmTier.next(this.firm.tier);t.openActionMenu(new a.OverlayActionMenu(t,`Upgrade ${this.firm.id}`,r.FirmTier.cost(e),(()=>{this.firm.setTier(e),this.updateButtons(),this.updateUpgradeStatus()})))}}).build(),this.domElement.append(s.Div.simple("",["background"]).build(),new s.Div({styleClasses:["overlay"],children:[new s.Div({styleClasses:["content"],children:[this.inputs,new s.Div({styleClasses:["fill","info"],children:[new s.Div({styleClasses:["top"],children:[s.Div.simple(this.firm.id,["name"]).build(),s.Div.simple("",["fill"]).build(),this.upgradeStatus]}).build(),new s.Div({styleClasses:["capacity"],children:[this.capacityBar]}).build(),new s.Div({styleClasses:["actions"],children:[new n.ElementBuilder({tag:"button",styleClasses:["tertiary"],text:"Subsidise",onclick:()=>{this.game.openActionMenu(new a.OverlayActionMenu(t,"Supply Production Needs",l.Basket.withItems(this.firm.buyGoal),(()=>{for(let e of this.firm.buyGoal)this.firm.inventory.addGood(e[0],e[1]),this.firm.buyGoal.set(e[0],0)})))}}).build(),this.upgradeButton,s.Div.simple("",["fill"]).build(),this.errorButton]}).build()]}).build(),this.outputs]}).build()]}).build()),this.updateUpgradeStatus(),this.updateInputs(),this.updateOutputs(),this.updateCapacityBar(),this.updateError()}updateUpgradeStatus(){this.firm.tier==r.FirmTier.Manual?this.upgradeStatus.classList.remove("green-line"):(this.upgradeStatus.classList.add("green-line"),this.upgradeStatus.innerHTML=r.FirmTier.icon(this.firm.tier))}updateInputs(){this.removeChildren(this.inputs),this.firm.recipe.inputs.forEach(((e,t)=>{this.inputs.appendChild(new s.GameIcon(t).build())}))}updateOutputs(){this.removeChildren(this.outputs),this.outputs.appendChild(new s.GameIcon(this.firm.recipe.output).build())}updateCapacityBar(){this.capacityBar.style.width=this.firm.lastProduction/this.firm.maxCapacity*95+5+"%"}updateButtons(){this.upgradeAvailable()||(this.upgradeButton.style.display="none")}updateError(){this.errorButton.style.display="none"}updateElement(e){}gameTick(){this.updateCapacityBar(),this.updateError()}upgradeAvailable(){return null!=r.FirmTier.next(this.firm.tier)&&this.firm.tier!=this.firm.finalTier}}t.FirmWidget=c},77:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirmsContainer=void 0;const s=i(299),r=i(109),n=i(710),o=i(54),a=i(162);class l extends o.GameWidget{constructor(e,t,i,s){super(e,"div","factories-container"),this.firmWidgets=[],this.firmContainer=r.Div.simple("",["factories"]).build(),this.firms=t,this.constructionMenu=new a.FirmConstructionMenu(e,s,t),this.domElement.append(this.firmContainer,...i?[new n.ElementBuilder({tag:"button",styleClasses:["add","primary","material-icons"],text:"add",onclick:()=>{e.openConstructionMenu(this.constructionMenu)}}).build()]:[]),this.updateWidgetList()}updateWidgetList(){this.firms.filter((e=>this.firmWidgets.map((e=>e.firm)).every((t=>e!=t)))).forEach((e=>{let t=new s.FirmWidget(e,this.game);this.firmWidgets.push(t),this.firmContainer.append(t.domElement)}))}updateElement(e){}gameTick(){this.updateWidgetList();for(let e of this.firmWidgets)e.gameTick()}}t.FirmsContainer=l},54:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameWidget=void 0;const s=i(894);class r extends s.Widget{constructor(e,t,...i){super(t,...i),this.game=e}}t.GameWidget=r},540:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=i(894),r=i(511),n=i(786),o=i(109),a=i(77),l=i(325),c=i(664),u=i(27),d=i(553),h=i(945);class m extends s.Widget{constructor(){super("div","game"),this.simulation=new r.Simulation,this.firmsMenuOpened=!1,this.actionMenuOpened=!1,this.topBar=new n.TopBar(this),this.display=new o.Div({styleClasses:["display"]}).build(),this.actionOverlayContainer=new o.Div({styleClasses:["spend-overlay"]}).build(),this.constructionOverlayContainer=new o.Div({styleClasses:["construct-overlay"]}).build(),this.overview=new u.Overview(this),this.resources=new a.FirmsContainer(this,this.simulation.resources,!0,d.FirmBlueprint.resourcesBlueprints),this.factories=new a.FirmsContainer(this,this.simulation.factories,!0,d.FirmBlueprint.factoryBlueprints),this.population=new l.PopulationWidget(this),this.markets=new c.MarketsWidget(this),this.technology=new h.TechnologyWidget(this),this.timeSinceLastUpdate=0,this.updateInterval=0,this.previousTime=0,this.domElement.append(new o.Div({styleClasses:["main"],children:[this.topBar.domElement,this.display]}).build(),this.constructionOverlayContainer,this.actionOverlayContainer),this.updateSelection(0),this.tick(),window.requestAnimationFrame((e=>this.update(e)))}update(e){if(0!=this.updateInterval&&!this.actionMenuOpened&&!this.firmsMenuOpened){let t=e-this.previousTime;this.timeSinceLastUpdate+=t,this.timeSinceLastUpdate>=this.updateInterval&&(this.tick(),this.timeSinceLastUpdate=0)}this.previousTime=e,window.requestAnimationFrame((e=>this.update(e)))}tick(){this.simulation.tick(),this.updateChildren()}updateChildren(){this.overview.gameTick(),this.topBar.gameTick(),this.resources.gameTick(),this.population.gameTick(),this.markets.gameTick(),this.technology.gameTick()}clearDisplay(){for(;this.display.hasChildNodes();)this.display.removeChild(this.display.firstChild)}updateSelection(e){switch(this.clearDisplay(),e){case 0:return this.display.append(this.overview.domElement),void this.overview.gameTick();case 1:return this.display.append(this.population.domElement),void this.population.gameTick();case 2:return this.display.append(this.markets.domElement),void this.markets.gameTick();case 3:return this.display.append(this.resources.domElement),void this.resources.gameTick();case 4:return this.display.append(this.factories.domElement),void this.factories.gameTick();case 5:return this.display.append(this.technology.domElement),void this.technology.gameTick()}}updateTimeControl(e){switch(e){case 0:this.updateInterval=0;break;case 1:this.updateInterval=450;break;case 2:this.updateInterval=150;break;case 3:this.updateInterval=50}}openActionMenu(e){this.actionMenuOpened=!0,this.actionOverlayContainer.style.display="block",this.actionOverlayContainer.append(e.domElement)}dismissActionMenu(){this.actionMenuOpened=!1,this.actionOverlayContainer.style.display="none",this.removeChildren(this.actionOverlayContainer)}openConstructionMenu(e){this.firmsMenuOpened=!0,this.constructionOverlayContainer.style.display="flex",this.constructionOverlayContainer.append(e.domElement)}dismissConstructionMenu(){this.firmsMenuOpened=!1,this.constructionOverlayContainer.style.display="none",this.removeChildren(this.constructionOverlayContainer),this.updateChildren()}updateElement(e){}}t.Game=m},262:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemList=void 0;const s=i(894),r=i(109),n=i(983);class o extends s.Widget{constructor(e,t,i){super("div","item-list"),this.list=r.Div.simple("",["list"]).build(),this.items=[],this.basket=e,this.allowDelete=i,this.domElement.append(r.Div.simple(t,["title"]).build(),this.list),this.updateElement()}removeGood(e){this.basket.delete(e.good),this.items.splice(this.items.indexOf(e),1),this.list.removeChild(e.domElement)}updateElement(){for(let e of this.basket){let t=this.items.find((t=>t.good==e[0]));if(t)0==e[1]&&(this.items.splice(this.items.indexOf(t),1),this.list.removeChild(t.domElement));else if(0!=e[1]){let t=new n.Item(e[0],e[1],this,this.allowDelete);this.items.push(t),this.list.append(t.domElement)}}for(let e of this.items)e.updateElement(this.basket.get(e.good))}}t.ItemList=o},983:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;const s=i(894),r=i(109),n=i(710);class o extends s.Widget{constructor(e,t,i,s){super("div","entry"),this.good=e,this.list=i,this.amountElement=r.Div.simple(t.toString(),["amount"]).build(),this.domElement.append(new r.GameIcon(e).build(),r.Div.simple("",["fill"]).build(),this.amountElement,...s?[new n.ElementBuilder({tag:"button",text:"cancel",styleClasses:["material-icons","primary-container"],onclick:()=>{i.removeGood(this)}}).build()]:[])}updateElement(e){this.amountElement.innerHTML=e.toString(),e>=0&&this.domElement.classList.contains("error")?this.domElement.classList.remove("error"):e<0&&!this.domElement.classList.contains("error")&&this.domElement.classList.add("error")}}t.Item=o},60:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarketDetails=void 0;const s=i(128),r=i(54),n=i(109),o=i(201),a=i(314);class l extends r.GameWidget{constructor(e,t){super(e,"div","details"),this.chartElement=n.Div.simple("",["ct-chart"]).build(),this.market=t,this.orderMenu=new a.MarketOrderMenu(e,t),this.domElement.append(new n.Div({styleClasses:["chart"],children:[n.Div.simple("Price",["title"]).build(),this.chartElement]}).build(),new n.Div({styleClasses:["misc"],children:[this.orderMenu.domElement]}).build()),this.chart=new s.LineChart(this.chartElement,{series:[t.exchangePriceHistory]},o.Config.graphConfigs)}gameTick(){this.chart.update(),this.orderMenu.gameTick()}updateElement(e){}}t.MarketDetails=l},593:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarketListButton=void 0;const s=i(54),r=i(109),n=i(10);class o extends s.GameWidget{constructor(e,t,i,s){super(e,"a","market"),this.price=r.Span.simple("0",[]).build(),this.quantity=r.Span.simple("0",[]).build(),this.list=t,this.market=i,this.domElement.append(r.Div.simple(i.good,["green-line"]).build(),new r.Div({styleClasses:["info"],children:[r.Div.simple(n.Good.name(i.good),["name"]).build(),new r.Div({styleClasses:["data"],children:[new r.Div({children:[new r.MaterialIcon("sell").build(),this.price]}).build(),new r.Div({children:[new r.MaterialIcon("swap_horiz").build(),this.quantity]}).build()]}).build()]}).build()),this.domElement.addEventListener("click",(function(){t.updateElement(s)}))}updateElement(e){e?this.domElement.classList.add("selected"):this.domElement.classList.remove("selected")}gameTick(){this.price.innerHTML=(Math.round(100*this.market.currentExchangePrice)/100).toString(),this.quantity.innerHTML=this.market.currentExchangeQuantity.toString()}}t.MarketListButton=o},755:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarketList=void 0;const s=i(54),r=i(593);class n extends s.GameWidget{constructor(e,t){super(e,"div","list"),this.marketButtons=[],this.container=t,this.lastState=0}gameTick(){Array.from(this.game.simulation.markets.values()).filter((e=>!this.marketButtons.some((t=>t.market==e)))).forEach(((e,t)=>{let i=new r.MarketListButton(this.game,this,e,this.marketButtons.length);this.marketButtons.push(i),this.domElement.append(i.domElement)}));for(let e of this.marketButtons)e.gameTick()}updateElement(e){for(let t=0;t<this.marketButtons.length;t++)this.marketButtons[t].updateElement(t==e);this.container.updateElement(e)}}t.MarketList=n},314:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarketOrderMenu=void 0;const s=i(54),r=i(109),n=i(710);class o extends s.GameWidget{constructor(e,t){super(e,"div","order-menu"),this.inventory=r.Span.simple("0",[]).build(),this.pendingOrders=r.Span.simple("0",[]).build(),this.cost=r.Span.simple("0",[]).build(),this.amount=new n.ElementBuilder({tag:"input"}).withAttribute("type","number").build(),this.orderButton=new n.ElementBuilder({tag:"button",styleClasses:["primary"],text:"Order"}).build(),this.market=t,this.domElement.append(r.Div.simple("Purchase",["title"]).build(),new r.Div({styleClasses:["entry"],children:[new r.MaterialIcon("inventory").withAttribute("title","Inventory").build(),this.inventory]}).build(),new r.Div({styleClasses:["entry"],children:[new r.MaterialIcon("pending").withAttribute("title","Pending Orders").build(),this.pendingOrders]}).build(),new r.Div({styleClasses:["entry"],children:[new r.MaterialIcon("monetization_on").withAttribute("title","Estimated Cost").build(),this.cost]}).build(),this.amount,this.orderButton),this.amount.addEventListener("input",(e=>{let t=e.target;parseFloat(t.value)<0&&(t.value="0"),parseFloat(t.value)%1!=0&&(t.value=parseInt(t.value).toString()),this.onAmountChange()})),this.orderButton.addEventListener("click",(()=>{this.game.simulation.government.addBuyGoal(this.market.good,this.intendedAmount),this.amount.value="0",this.gameTick()}))}get intendedAmount(){let e=parseInt(this.amount.value);return isNaN(e)?0:e}onAmountChange(){let e=this.intendedAmount;this.cost.innerHTML=(Math.round(e*this.market.currentExchangePrice*100)/100).toString(),this.orderButton.disabled=0==e}gameTick(){this.inventory.innerHTML=this.game.simulation.government.inventory.get(this.market.good).toString(),this.game.simulation.government.buyGoal.has(this.market.good)?this.pendingOrders.innerHTML=this.game.simulation.government.buyGoal.get(this.market.good).toString():this.pendingOrders.innerHTML="0"}updateElement(e){}}t.MarketOrderMenu=o},664:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarketsWidget=void 0;const s=i(54),r=i(755),n=i(109),o=i(60);class a extends s.GameWidget{constructor(e){super(e,"div","markets"),this.details=[],this.infoContainer=n.Div.simple("",["details-container"]).build(),this.marketList=new r.MarketList(e,this),this.lastState=0,this.domElement.append(this.marketList.domElement,this.infoContainer)}gameTick(){Array.from(this.game.simulation.markets.values()).filter((e=>!this.details.some((t=>t.market==e)))).forEach((e=>{let t=new o.MarketDetails(this.game,e);this.details.push(t)})),this.details[this.lastState].gameTick(),this.marketList.gameTick()}updateElement(e){this.removeChildren(this.infoContainer),this.infoContainer.append(this.details[e].domElement),this.lastState=e,this.details[this.lastState].gameTick()}}t.MarketsWidget=a},295:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayActionMenu=void 0;const s=i(54),r=i(109),n=i(710),o=i(262);class a extends s.GameWidget{constructor(e,t,i,s){super(e,"div","spend");let a=e.simulation.government.inventory.subtract(i),l=new n.ElementBuilder({tag:"button",styleClasses:["material-icons","primary"],text:"done",onclick:()=>{s(),e.simulation.government.inventory.subtractMut(i),e.dismissActionMenu()}}).build();l.disabled=a.hasNegatives(),this.domElement.append(r.Div.simple(t,["message"]).build(),new r.Div({styleClasses:["spend-info"],children:[new o.ItemList(e.simulation.government.inventory,"Inventory",!1).domElement,new o.ItemList(a,"After",!1).domElement]}).build(),new r.Div({styleClasses:["actions"],children:[l,new n.ElementBuilder({tag:"button",styleClasses:["material-icons","primary"],text:"close",onclick:()=>{e.dismissActionMenu()}}).build()]}).build())}gameTick(){}updateElement(e){}}t.OverlayActionMenu=a},649:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FactorsOfProductionWidget=void 0;const s=i(54),r=i(109);class n extends s.GameWidget{constructor(e){super(e,"div","factors"),this.labourProgress=r.Div.simple("",["progress"]).build(),this.resourcesProgress=r.Div.simple("",["progress"]).build(),this.physicalCapitalProgress=r.Div.simple("",["progress"]).build(),this.humanCapitalProgress=r.Div.simple("",["progress"]).build(),this.technologyProgress=r.Div.simple("",["progress"]).build(),console.log("HELLO?"),this.domElement.append(r.Div.simple("Factors of Production",["title"]).build(),new r.Div({styleClasses:["list"],children:[new r.Div({styleClasses:["entry"],children:[new r.GameIcon("population").build(),new r.Div({styleClasses:["progress-bar"],children:[this.labourProgress]}).build()]}).build(),new r.Div({styleClasses:["entry"],children:[new r.GameIcon("resources").build(),new r.Div({styleClasses:["progress-bar"],children:[this.resourcesProgress]}).build()]}).build(),new r.Div({styleClasses:["entry"],children:[new r.GameIcon("factory").build(),new r.Div({styleClasses:["progress-bar"],children:[this.physicalCapitalProgress]}).build()]}).build(),new r.Div({styleClasses:["entry"],children:[new r.GameIcon("assembly").build(),new r.Div({styleClasses:["progress-bar"],children:[this.humanCapitalProgress]}).build()]}).build(),new r.Div({styleClasses:["entry"],children:[new r.GameIcon("technology").build(),new r.Div({styleClasses:["progress-bar"],children:[this.technologyProgress]}).build()]}).build()]}).build())}gameTick(){this.labourProgress.style.width=this.calculateWidth(this.game.simulation.labourFactor),this.resourcesProgress.style.width=this.calculateWidth(this.game.simulation.resourcesFactor),this.physicalCapitalProgress.style.width=this.calculateWidth(this.game.simulation.physicalCapitalFactor),this.humanCapitalProgress.style.width=this.calculateWidth(this.game.simulation.humanCapitalFactor),this.technologyProgress.style.width=this.calculateWidth(this.game.simulation.technologyFactor)}calculateWidth(e){return 95*e+5+"%"}updateElement(e){}}t.FactorsOfProductionWidget=n},27:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Overview=void 0;const s=i(54),r=i(262),n=i(109),o=i(128),a=i(201),l=i(649);class c extends s.GameWidget{constructor(e){super(e,"div","overview"),this.chartElement=n.Div.simple("",["ct-chart"]).build(),this.inventory=new r.ItemList(e.simulation.government.inventory,"Inventory",!1),this.orders=new r.ItemList(e.simulation.government.buyGoal,"Orders",!0),this.factors=new l.FactorsOfProductionWidget(e),this.domElement.append(new n.Div({styleClasses:["graph-container"],children:[n.Div.simple("Real GDP",["title"]).build(),this.chartElement]}).build(),new n.Div({styleClasses:["info"],children:[this.inventory.domElement,this.orders.domElement,this.factors.domElement]}).build()),this.chart=new o.LineChart(this.chartElement,{series:[e.simulation.realGDPHistory]},a.Config.graphConfigs)}gameTick(){this.inventory.updateElement(),this.orders.updateElement(),this.chart.update(),this.factors.gameTick()}updateElement(e){}}t.Overview=c},482:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IndividualWidget=void 0;const s=i(54),r=i(710),n=i(109),o=i(10);class a extends s.GameWidget{constructor(e,t){super(e,"div","fruit"),this.face=new r.ElementBuilder({tag:"img"}).withAttribute("src","img/fruit_of_labour_subsistence.svg").build(),this.labour=new r.ElementBuilder({tag:"img"}).withAttribute("src","img/fruit_of_labour_labour.svg").build(),this.preferredGoods=n.Div.simple("",["io"]).build(),this.job=n.Div.simple("",["io"]).build(),this.individual=t,this.domElement.append(this.preferredGoods,new n.Div({styleClasses:["avatar"],children:[this.face,this.labour,new r.ElementBuilder({tag:"img"}).withAttribute("src","img/fruit_of_labour_strokes.svg").build()]}).build(),this.job)}updateElement(e){}updateFace(){this.individual.lastUtility>300?this.face.setAttribute("src","img/fruit_of_labour_gainful.svg"):this.individual.lastUtility>30?this.face.setAttribute("src","img/fruit_of_labour_subsistence.svg"):this.face.setAttribute("src","img/fruit_of_labour_struggling.svg")}updateLabour(){switch(this.individual.mostProductiveLabour){case o.Good.Forestry:this.labour.className="labour-forestry";break;case o.Good.Farming:this.labour.className="labour-farming";break;case o.Good.Technical:this.labour.className="labour-technical";break;case o.Good.Artisan:this.labour.className="labour-artisan";break;case o.Good.Assembly:this.labour.className="labour-assembly";break;case o.Good.Mining:this.labour.className="labour-mining"}}updateInputsAndOutputs(){this.removeChildren(this.preferredGoods),this.individual.preferences.forEach((e=>{this.preferredGoods.append(new n.GameIcon(e).build())})),this.removeChildren(this.job),this.job.append(new n.GameIcon(this.individual.job).build())}gameTick(){this.updateFace(),this.updateLabour(),this.updateInputsAndOutputs()}}t.IndividualWidget=a},325:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PopulationWidget=void 0;const s=i(54),r=i(482);class n extends s.GameWidget{constructor(e){super(e,"div","population"),this.individualWidgets=[]}gameTick(){this.game.simulation.individuals.filter((e=>!this.individualWidgets.some((t=>t.individual==e)))).forEach((e=>{let t=new r.IndividualWidget(this.game,e);this.individualWidgets.push(t),this.domElement.append(t.domElement)}));for(let e of this.individualWidgets)e.gameTick()}updateElement(e){}}t.PopulationWidget=n},429:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoodWidget=void 0;const s=i(54),r=i(10),n=i(109);class o extends s.GameWidget{constructor(e,t){super(e,"div","good"),this.good=t,this.domElement.append(new n.GameIcon(t).build(),n.Div.simple(r.Good.name(t),["name"]).build(),n.Div.simple(`Value: ${r.Good.getBaseUtility(t)}`,["value"]).build())}gameTick(){this.game.simulation.markets.has(this.good)&&!this.domElement.classList.contains("unlocked")&&this.domElement.classList.add("unlocked")}updateElement(e){}}t.GoodWidget=o},42:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TechnologyCategory=void 0;const s=i(54),r=i(109),n=i(429);class o extends s.GameWidget{constructor(e,t,i){super(e,"div","category"),this.goods=t.map((t=>new n.GoodWidget(e,t))),this.domElement.append(r.Div.simple(i,["title"]).build(),new r.Div({styleClasses:["list"],children:this.goods.map((e=>e.domElement))}).build())}gameTick(){for(let e of this.goods)e.gameTick()}updateElement(e){}}t.TechnologyCategory=o},945:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TechnologyWidget=void 0;const s=i(54),r=i(42),n=i(173),o=i(10);class a extends s.GameWidget{constructor(e){super(e,"div","technology"),this.categories=n.FirmTier.values.map((e=>({tier:e,goods:o.Good.values.filter((t=>o.Good.getTier(t)==e))}))).map((t=>new r.TechnologyCategory(e,t.goods,n.FirmTier.name(t.tier)))),this.domElement.append(...this.categories.map((e=>e.domElement)))}gameTick(){for(let e of this.categories)e.gameTick()}updateElement(e){}}t.TechnologyWidget=a},827:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationBarButton=void 0;const s=i(894),r=i(109);class n extends s.Widget{constructor(e,t,i,s){super("div","option"),this.index=i,this.rail=s,this.addChildren(new r.Div({styleClasses:["green-line"],text:e}),new r.Div({styleClasses:["description"],text:t})),this.domElement.addEventListener("click",(function(){s.updateElement(i)}))}updateElement(e){e?this.domElement.classList.add("selected"):this.domElement.classList.remove("selected")}}t.NavigationBarButton=n},691:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationBar=void 0;const s=i(894),r=i(827);class n extends s.Widget{constructor(e){super("div","navigation"),this.buttons=[new r.NavigationBarButton("government","Overview",0,this),new r.NavigationBarButton("population","Population",1,this),new r.NavigationBarButton("markets","Markets",2,this),new r.NavigationBarButton("resources","Resources",3,this),new r.NavigationBarButton("factory","Factories",4,this),new r.NavigationBarButton("technology","Technology",5,this)],this.game=e,this.lastState=0,this.buttons[0].updateElement(!0),this.buttons.forEach((e=>this.domElement.append(e.domElement)))}updateElement(e){for(let t=0;t<this.buttons.length;t++)this.buttons[t].updateElement(t==e);this.game.updateSelection(e)}}t.NavigationBar=n},505:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeControlButton=void 0;const s=i(894);class r extends s.Widget{constructor(e,t,i){super("button","primary-container","material-icons"),this.domElement.append(e),this.index=t,this.timeControl=i,this.domElement.addEventListener("click",(function(){i.updateElement(t)}))}updateElement(e){e?(this.domElement.classList.remove("primary-container"),this.domElement.classList.add("primary")):(this.domElement.classList.add("primary-container"),this.domElement.classList.remove("primary"))}}t.TimeControlButton=r},226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeControl=void 0;const s=i(505),r=i(109),n=i(54);class o extends n.GameWidget{constructor(e){super(e,"div","time"),this.buttons=[new s.TimeControlButton("pause",0,this),new s.TimeControlButton("play_arrow",1,this),new s.TimeControlButton("forward",2,this),new s.TimeControlButton("fast_forward",3,this)],this.timeDisplay=r.Div.simple("Cycle 0",["current-time"]).build(),this.lastState=0,this.buttons[0].updateElement(!0),this.domElement.append(this.timeDisplay,new r.Div({styleClasses:["control"],children:this.buttons.map((e=>e.domElement))}).build())}updateTime(){this.timeDisplay.innerHTML=`Cycle ${this.game.simulation.timeElapsed}`}updateElement(e){for(let t=0;t<this.buttons.length;t++)this.buttons[t].updateElement(t==e);this.game.updateTimeControl(e)}gameTick(){this.updateTime()}}t.TimeControl=o},786:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TopBar=void 0;const s=i(691),r=i(109),n=i(226),o=i(54);class a extends o.GameWidget{constructor(e){super(e,"div","top-bar"),this.gdpDisplay=r.Span.simple("0",[]).build(),this.moneyDisplay=r.Span.simple("0",[]).build(),this.navigationBar=new s.NavigationBar(e),this.timeControl=new n.TimeControl(e),this.domElement.append(this.navigationBar.domElement,new r.Div({styleClasses:["fill"]}).build(),new r.Div({styleClasses:["info"],children:[new r.Div({children:[r.Span.simple("trending_up",["material-icons"]).build(),this.gdpDisplay]}).build(),new r.Div({children:[r.Span.simple("paid",["material-icons"]).build(),this.moneyDisplay]}).build()]}).build(),this.timeControl.domElement)}updateElement(){}updateInfo(){this.gdpDisplay.innerHTML=this.game.simulation.currentRealGDP.toString(),this.moneyDisplay.innerHTML=(Math.round(100*this.game.simulation.government.inventory.money)/100).toString()}gameTick(){this.updateInfo(),this.timeControl.gameTick()}}t.TopBar=a},377:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=void 0;const s=i(894),r=i(109),n=i(710);class o extends s.Widget{constructor(e){super("div","main-menu"),this.domElement.append(r.Div.simple("Green Line Goes Up",["title"]).build(),r.Div.simple("An Economic Simulator Game",["subtitle"]).build(),new n.ElementBuilder({tag:"button",styleClasses:["primary"],text:"Tutorial",onclick:()=>{e.openTutorial()}}).build(),new n.ElementBuilder({tag:"button",styleClasses:["primary"],text:"Play",onclick:()=>{e.play()}}).build())}updateElement(e){}}t.MainMenu=o},384:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tutorial=void 0;const s=i(894),r=i(109),n=i(710);class o extends s.Widget{constructor(e){super("div","tutorial"),this.images=["img/tutorial1.png","img/tutorial2.png","img/tutorial3.png","img/tutorial4.png","img/tutorial5.png","img/tutorial6.png","img/tutorial7.png","img/tutorial8.png"],this.titles=["Fruit of Labour","Make Them Happy","Market Economy","Human Capital","Favourites","Firms","Circular Flow","GDP"],this.texts=["Say hello to our economic actor, the fruit of labour! In the simulation, the fruit of labour represents an individual person, and there are a total of 100 fruits to represent a small population. Each person likes to consume goods and would want to spend money to get them. When they consume something, they gain what's called \"utility\", the economist's way of quantifying happiness. It's generally assumed that the more things someone consumes, the happier they get. Whether that's true is up to debate, but it's true for our little fruits. There are two basic rules: the more the better, and the more varied and different the better.","In the simulation, you will see that a fruit could be struggling if it doesn't earn enough of an income to buy goods that make it happy. It could be living at subsistence level if it earns just enough money to buy some basic goods every day. However, if you, the government, do a really good job at developing the economy, our fruits of labour will turn golden to show that they are living the time of their lives. ","Our simulation is organised through markets. Each fruit keeps track of the price of their favourite goods, and, every day, considers if it's worth buying something. If lots of fruits want the same thing and are willing to pay big money for it, then its price would go up. If nobody wants something, its price will plummet. Eventually, everybody settles on some kind of spending habit and prices stabilise. You, as the government, have the ability to buy from the market as well. However, money you spend is printed, meaning that everything you buy will inflate the prices. Spend wisely!","Each fruit at birth is gifted with a kind of talent, the ability to produce a certain kind of labour more efficiently than the others. There are six types of labour: mining, artisan, forestry, farming, assembly, and technical, each with their own applications. However, no matter how talented a fruit is, if no one is willing to employ it, then it has to work somewhere else. Make sure to diversify the economy so everyone can work their favourite jobs!","Each fruit also has their favourite things to consume. When you hover over a fruit, you will see their top three goods, and their current job. ","How do things get made? Firms serve as a vital part of the economy that transforms labour into goods. Take a forest for example, we may employ fruits and get some forestry labour to obtain some wood as a result. All goods in the economy are produced by firms, and it is your job, as the government, to build them one by one. In addition, firms can become more efficient by receiving upgrades. By providing firms with advanced tools, you can double their productivity with every upgrade, freeing up fruits to work on other things while producing more! Sometimes, firms may struggle and cannot afford their inputs, as the government can help them out in the short-term by supplying their goods, but in the long run a failing firm will stay a failing firm.",'In the simulation, a "cycle" is our basic unit of time. In every cycle, our fruits pick their jobs and sell their labour to firms. Firms in term use their labour to produce goods, and sell the goods back to the fruits. The fruits pay money for the goods, and firms pay this money back to the fruits as a wage. This beautiful cycle will keep the economy running as money and goods swap between individuals and firms.',"The Gross Domestic Product (GDP), is the total value of everything your simulation produces in a period of time, in this case every cycle. Your job as the government is to make this line go up, by constructing and upgrading firms, and producing more and better things over time. To help you out, every cycle you will be awarded a portion of your GDP as your credit. Spend credits to print money and buy things from the market. While prices will go up in the long run, you will be able to increase the productivity of the economy meanwhile, and make everyone's lives better!"],this.imageElement=new n.ElementBuilder({tag:"img"}).withAttribute("src",this.images[0]).build(),this.titleElement=r.Div.simple("",["title"]).build(),this.textElement=r.Div.simple("",["text"]).build(),this.lastState=0,this.previousButton=new n.ElementBuilder({tag:"button",styleClasses:["primary","material-icons"],text:"navigate_before",onclick:()=>{this.updateElement(this.lastState-1)}}).build(),this.nextButton=new n.ElementBuilder({tag:"button",styleClasses:["primary","material-icons"],text:"navigate_next",onclick:()=>{this.updateElement(this.lastState+1)}}).build(),this.domElement.append(new r.Div({styleClasses:["image"],children:[this.imageElement]}).build(),new r.Div({styleClasses:["content"],children:[this.titleElement,this.textElement,new r.Div({styleClasses:["actions"],children:[new n.ElementBuilder({tag:"button",styleClasses:["primary","material-icons"],text:"close",onclick:()=>{e.menu()}}).build(),this.previousButton,r.Div.simple("",["fill"]).build(),this.nextButton]}).build()]}).build()),this.updateElement(0)}updateElement(e){this.lastState=e,this.imageElement.src=this.images[e],this.titleElement.innerHTML=this.titles[e],this.textElement.innerHTML=this.texts[e],this.previousButton.disabled=0==e,this.nextButton.disabled=e==this.images.length-1}}t.Tutorial=o},894:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=void 0,t.Widget=class{constructor(e,...t){this.domElement=document.createElement(e),t.forEach((e=>this.domElement.classList.add(e)))}clearElement(){for(;this.domElement.hasChildNodes();)this.domElement.removeChild(this.domElement.firstChild)}render(e){return this.lastState=e,this.updateElement(e),this.domElement}rerender(){this.render(this.lastState)}addChildren(...e){e.map((e=>e.build())).forEach((e=>this.domElement.append(e)))}removeChildren(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}}},128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const i={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},s=8,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function n(e,t){return"number"==typeof e?e+t:e}function o(e){if("string"==typeof e){const t=/^(\d+)\s*(.*)$/g.exec(e);return{value:t?+t[1]:0,unit:(null==t?void 0:t[2])||void 0}}return{value:Number(e)}}function a(e){return String.fromCharCode(97+e%26)}const l=2221e-19;function c(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)}function u(e,t,i){return t/i.range*e}function d(e,t){const i=Math.pow(10,t||s);return Math.round(e*i)/i}function h(e){if(1===e)return e;function t(e,i){return e%i==0?i:t(i,e%i)}function i(e){return e*e+1}let s,r=2,n=2;if(e%2==0)return 2;do{r=i(r)%e,n=i(i(n))%e,s=t(Math.abs(r-n),e)}while(1===s);return s}function m(e,t,i,s){const r=(s-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}function p(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={high:t.high,low:t.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};r.valueRange=r.high-r.low,r.oom=c(r.valueRange),r.step=Math.pow(10,r.oom),r.min=Math.floor(r.low/r.step)*r.step,r.max=Math.ceil(r.high/r.step)*r.step,r.range=r.max-r.min,r.numberOfSteps=Math.round(r.range/r.step);const n=u(e,r.step,r)<i,o=s?h(r.range):0;if(s&&u(e,1,r)>=i)r.step=1;else if(s&&o<r.step&&u(e,o,r)>=i)r.step=o;else{let t=0;for(;;){if(n&&u(e,r.step,r)<=i)r.step*=2;else{if(n||!(u(e,r.step/2,r)>=i))break;if(r.step/=2,s&&r.step%1!=0){r.step*=2;break}}if(t++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}function a(e,t){return e===(e+=t)&&(e*=1+(t>0?l:-l)),e}r.step=Math.max(r.step,l);let m=r.min,p=r.max;for(;m+r.step<=r.low;)m=a(m,r.step);for(;p-r.step>=r.high;)p=a(p,-r.step);r.min=m,r.max=p,r.range=r.max-r.min;const g=[];for(let e=r.min;e<=r.max;e=a(e,r.step)){const t=d(e);t!==g[g.length-1]&&g.push(t)}return r.values=g,r}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(let t=0;t<i.length;t++){const s=i[t];for(const t in s){const i=s[t];e[t]="object"!=typeof i||null===i||i instanceof Array?i:g(e[t],i)}}return e}const y=e=>e;function f(e,t){return Array.from({length:e},t?(e,i)=>t(i):()=>{})}const v=(e,t)=>e+(t||0),b=(e,t)=>f(Math.max(...e.map((e=>e.length))),(i=>t(...e.map((e=>e[i])))));function w(e,t){return null!==e&&"object"==typeof e&&Reflect.has(e,t)}function x(e){return null!==e&&isFinite(e)}function M(e){return!e&&0!==e}function E(e){return x(e)?Number(e):void 0}function C(e){return!!Array.isArray(e)&&e.every(Array.isArray)}function G(e,t){let i=0;e[arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"reduceRight":"reduce"](((e,s,r)=>t(s,i++,r)),void 0)}function k(e,t){const i=Array.isArray(e)?e[t]:w(e,"data")?e.data[t]:null;return w(i,"meta")?i.meta:void 0}function P(e){return null==e||"number"==typeof e&&isNaN(e)}function A(e){return Array.isArray(e)&&e.every((e=>Array.isArray(e)||w(e,"data")))}function B(e){return"object"==typeof e&&null!==e&&(Reflect.has(e,"x")||Reflect.has(e,"y"))}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return B(e)&&w(e,t)?E(e[t]):E(e)}function F(e,t,i){const s={high:void 0===(t={...t,...i?"x"===i?t.axisX:t.axisY:{}}).high?-Number.MAX_VALUE:+t.high,low:void 0===t.low?Number.MAX_VALUE:+t.low},r=void 0===t.high,n=void 0===t.low;return(r||n)&&function e(t){if(!P(t))if(Array.isArray(t))for(let i=0;i<t.length;i++)e(t[i]);else{const e=Number(i&&w(t,i)?t[i]:t);r&&e>s.high&&(s.high=e),n&&e<s.low&&(s.low=e)}}(e),(t.referenceValue||0===t.referenceValue)&&(s.high=Math.max(t.referenceValue,s.high),s.low=Math.min(t.referenceValue,s.low)),s.high<=s.low&&(0===s.low?s.high=1:s.low<0?s.high=0:(s.high>0||(s.high=1),s.low=0)),s}function T(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const n={labels:(e.labels||[]).slice(),series:_(e.series,s,r)},o=n.labels.length;return C(n.series)?(t=Math.max(o,...n.series.map((e=>e.length))),n.series.forEach((e=>{e.push(...f(Math.max(0,t-e.length)))}))):t=n.series.length,n.labels.push(...f(Math.max(0,t-o),(()=>""))),i&&function(e){var t;null===(t=e.labels)||void 0===t||t.reverse(),e.series.reverse();for(const t of e.series)w(t,"data")?t.data.reverse():Array.isArray(t)&&t.reverse()}(n),n}function S(e,t){if(!P(e))return t?function(e,t){let i,s;if("object"!=typeof e){const r=E(e);"x"===t?i=r:s=r}else w(e,"x")&&(i=E(e.x)),w(e,"y")&&(s=E(e.y));if(void 0!==i||void 0!==s)return{x:i,y:s}}(e,t):E(e)}function D(e,t){return Array.isArray(e)?e.map((e=>w(e,"value")?S(e.value,t):S(e,t))):D(e.data,t)}function _(e,t,i){if(A(e))return e.map((e=>D(e,t)));const s=D(e,t);return i?s.map((e=>[e])):s}function I(e,t,i){const s={increasingX:!1,fillHoles:!1,...i},r=[];let n=!0;for(let i=0;i<e.length;i+=2)void 0===O(t[i/2].value)?s.fillHoles||(n=!0):(s.increasingX&&i>=2&&e[i]<=e[i-2]&&(n=!0),n&&(r.push({pathCoordinates:[],valueData:[]}),n=!1),r[r.length-1].pathCoordinates.push(e[i],e[i+1]),r[r.length-1].valueData.push(t[i/2]));return r}function L(e){let t="";return null==e?e:(t="number"==typeof e?""+e:"object"==typeof e?JSON.stringify({data:e}):String(e),Object.keys(r).reduce(((e,t)=>e.replaceAll(t,r[t])),t))}class W{call(e,t){return this.svgElements.forEach((i=>Reflect.apply(i[e],i,t))),this}attr(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("attr",t)}elem(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("elem",t)}root(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("root",t)}getNode(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("getNode",t)}foreignObject(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("foreignObject",t)}text(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("text",t)}empty(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("empty",t)}remove(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("remove",t)}addClass(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("addClass",t)}removeClass(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("removeClass",t)}removeAllClasses(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("removeAllClasses",t)}animate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call("animate",t)}constructor(e){this.svgElements=[];for(let t=0;t<e.length;t++)this.svgElements.push(new R(e[t]))}}const N={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function j(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;const{easing:a,...l}=i,c={};let u,d;a&&(u=Array.isArray(a)?a:N[a]),l.begin=n(l.begin,"ms"),l.dur=n(l.dur,"ms"),u&&(l.calcMode="spline",l.keySplines=u.join(" "),l.keyTimes="0;1"),s&&(l.fill="freeze",c[t]=l.from,e.attr(c),d=o(l.begin||0).value,l.begin="indefinite");const h=e.elem("animate",{attributeName:t,...l});s&&setTimeout((()=>{try{h._node.beginElement()}catch(i){c[t]=l.to,e.attr(c),h.remove()}}),d);const m=h.getNode();r&&m.addEventListener("beginEvent",(()=>r.emit("animationBegin",{element:e,animate:m,params:i}))),m.addEventListener("endEvent",(()=>{r&&r.emit("animationEnd",{element:e,animate:m,params:i}),s&&(c[t]=l.to,e.attr(c),h.remove())}))}class R{attr(e,t){return"string"==typeof e?t?this._node.getAttributeNS(t,e):this._node.getAttribute(e):(Object.keys(e).forEach((t=>{if(void 0!==e[t])if(-1!==t.indexOf(":")){const s=t.split(":");this._node.setAttributeNS(i[s[0]],t,String(e[t]))}else this._node.setAttribute(t,String(e[t]))})),this)}elem(e,t,i){return new R(e,t,i,this,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}parent(){return this._node.parentNode instanceof SVGElement?new R(this._node.parentNode):null}root(){let e=this._node;for(;"svg"!==e.nodeName&&e.parentElement;)e=e.parentElement;return new R(e)}querySelector(e){const t=this._node.querySelector(e);return t?new R(t):null}querySelectorAll(e){const t=this._node.querySelectorAll(e);return new W(t)}getNode(){return this._node}foreignObject(e,t,s){let r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){const t=document.createElement("div");t.innerHTML=e,r=t.firstChild}else r=e;r instanceof Element&&r.setAttribute("xmlns",i.xmlns);const o=this.elem("foreignObject",t,s,n);return o._node.appendChild(r),o}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return null===(e=this._node.parentNode)||void 0===e||e.removeChild(this._node),this.parent()}replace(e){var t;return null===(t=this._node.parentNode)||void 0===t||t.replaceChild(e._node,this._node),e}append(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter((function(e,t,i){return i.indexOf(e)===t})).join(" ")),this}removeClass(e){const t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter((e=>-1===t.indexOf(e))).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach((s=>{const r=e[s];Array.isArray(r)?r.forEach((e=>j(this,s,e,!1,i))):j(this,s,r,t,i)})),this}constructor(e,t,s,r,n=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(i.svg,e),"svg"===e&&this.attr({"xmlns:ct":i.ct})),t&&this.attr(t),s&&this.addClass(s),r&&(n&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",r=arguments.length>3?arguments[3]:void 0;Array.from(e.querySelectorAll("svg")).filter((e=>e.getAttributeNS(i.xmlns,"ct"))).forEach((t=>e.removeChild(t)));const n=new R("svg").attr({width:t,height:s}).attr({style:"width: ".concat(t,"; height: ").concat(s,";")});return r&&n.addClass(r),e.appendChild(n.getNode()),n}function H(e){return"number"==typeof e?{top:e,right:e,bottom:e,left:e}:void 0===e?{top:0,right:0,bottom:0,left:0}:{top:"number"==typeof e.top?e.top:0,right:"number"==typeof e.right?e.right:0,bottom:"number"==typeof e.bottom?e.bottom:0,left:"number"==typeof e.left?e.left:0}}function q(e,t){var i,s,r,n;const a=Boolean(t.axisX||t.axisY),l=(null===(i=t.axisY)||void 0===i?void 0:i.offset)||0,c=(null===(s=t.axisX)||void 0===s?void 0:s.offset)||0,u=null===(r=t.axisY)||void 0===r?void 0:r.position,d=null===(n=t.axisX)||void 0===n?void 0:n.position;let h=e.width()||o(t.width).value||0,m=e.height()||o(t.height).value||0;const p=H(t.chartPadding);h=Math.max(h,l+p.left+p.right),m=Math.max(m,c+p.top+p.bottom);const g={x1:0,x2:0,y1:0,y2:0,padding:p,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return a?("start"===d?(g.y2=p.top+c,g.y1=Math.max(m-p.bottom,g.y2+1)):(g.y2=p.top,g.y1=Math.max(m-p.bottom-c,g.y2+1)),"start"===u?(g.x1=p.left+l,g.x2=Math.max(h-p.right,g.x1+1)):(g.x1=p.left,g.x2=Math.max(h-p.right-l,g.x1+1))):(g.x1=p.left,g.x2=Math.max(h-p.right,g.x1+1),g.y2=p.top,g.y1=Math.max(m-p.bottom,g.y2+1)),g}function z(e,t,i,s,r,n,o,a){const l={["".concat(i.units.pos,"1")]:e,["".concat(i.units.pos,"2")]:e,["".concat(i.counterUnits.pos,"1")]:s,["".concat(i.counterUnits.pos,"2")]:s+r},c=n.elem("line",l,o.join(" "));a.emit("draw",{type:"grid",axis:i,index:t,group:n,element:c,...l})}function U(e,t,i,s){const r=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},i,!0);s.emit("draw",{type:"gridBackground",group:e,element:r})}function X(e,t,i,s,r,n,o,a,l,c){const u={[r.units.pos]:e+o[r.units.pos],[r.counterUnits.pos]:o[r.counterUnits.pos],[r.units.len]:t,[r.counterUnits.len]:Math.max(0,n-10)},d=Math.round(u[r.units.len]),h=Math.round(u[r.counterUnits.len]),m=document.createElement("span");m.className=l.join(" "),m.style[r.units.len]=d+"px",m.style[r.counterUnits.len]=h+"px",m.textContent=String(s);const p=a.foreignObject(m,{style:"overflow: visible;",...u});c.emit("draw",{type:"label",axis:r,index:i,group:a,element:p,text:s,...u})}function Y(e,t,i){let s;const r=[];function n(r){const n=s;s=g({},e),t&&t.forEach((e=>{window.matchMedia(e[0]).matches&&(s=g(s,e[1]))})),i&&r&&i.emit("optionsChanged",{previousOptions:n,currentOptions:s})}if(!window.matchMedia)throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return t&&t.forEach((e=>{const t=window.matchMedia(e[0]);t.addEventListener("change",n),r.push(t)})),n(),{removeMediaQueryListeners:function(){r.forEach((e=>e.removeEventListener("change",n)))},getCurrentOptions:()=>s}}R.Easing=N;const Q={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},$={accuracy:3};function Z(e,t,i,s,r,n){const o={command:r?e.toLowerCase():e.toUpperCase(),...t,...n?{data:n}:{}};i.splice(s,0,o)}function J(e,t){e.forEach(((i,s)=>{Q[i.command.toLowerCase()].forEach(((r,n)=>{t(i,r,s,n,e)}))}))}class K{static join(e){const t=new K(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2?arguments[2]:void 0);for(let i=0;i<e.length;i++){const s=e[i];for(let e=0;e<s.pathElements.length;e++)t.pathElements.push(s.pathElements[e])}return t}position(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}remove(e){return this.pathElements.splice(this.pos,e),this}move(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return Z("M",{x:+e,y:+t},this.pathElements,this.pos++,i,s),this}line(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return Z("L",{x:+e,y:+t},this.pathElements,this.pos++,i,s),this}curve(e,t,i,s,r,n){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7?arguments[7]:void 0;return Z("C",{x1:+e,y1:+t,x2:+i,y2:+s,x:+r,y:+n},this.pathElements,this.pos++,o,a),this}arc(e,t,i,s,r,n,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8?arguments[8]:void 0;return Z("A",{rx:e,ry:t,xAr:i,lAf:s,sf:r,x:n,y:o},this.pathElements,this.pos++,a,l),this}parse(e){const t=e.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(((e,t)=>(t.match(/[A-Za-z]/)&&e.push([]),e[e.length-1].push(t),e)),[]);"Z"===t[t.length-1][0].toUpperCase()&&t.pop();const i=t.map((e=>{const t=e.shift(),i=Q[t.toLowerCase()];return{command:t,...i.reduce(((t,i,s)=>(t[i]=+e[s],t)),{})}}));return this.pathElements.splice(this.pos,0,...i),this.pos+=i.length,this}stringify(){const e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(((t,i)=>{const s=Q[i.command.toLowerCase()].map((t=>{const s=i[t];return this.options.accuracy?Math.round(s*e)/e:s}));return t+i.command+s.join(",")}),"")+(this.close?"Z":"")}scale(e,t){return J(this.pathElements,((i,s)=>{i[s]*="x"===s[0]?e:t})),this}translate(e,t){return J(this.pathElements,((i,s)=>{i[s]+="x"===s[0]?e:t})),this}transform(e){return J(this.pathElements,((t,i,s,r,n)=>{const o=e(t,i,s,r,n);(o||0===o)&&(t[i]=o)})),this}clone(){const e=new K(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map((e=>({...e}))),e.options={...this.options},e}splitByCommand(e){const t=[new K];return this.pathElements.forEach((i=>{i.command===e.toUpperCase()&&0!==t[t.length-1].pathElements.length&&t.push(new K),t[t.length-1].pathElements.push(i)})),t}constructor(e=!1,t){this.close=e,this.pathElements=[],this.pos=0,this.options={...$,...t}}}function ee(e){const t={fillHoles:!1,...e};return function(e,i){const s=new K;let r=!0;for(let n=0;n<e.length;n+=2){const o=e[n],a=e[n+1],l=i[n/2];void 0!==O(l.value)?(r?s.move(o,a,!1,l):s.line(o,a,!1,l),r=!1):t.fillHoles||(r=!0)}return s}}function te(e){const t={fillHoles:!1,...e};return function e(i,s){const r=I(i,s,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return K.join(r.map((t=>e(t.pathCoordinates,t.valueData))));{if(i=r[0].pathCoordinates,s=r[0].valueData,i.length<=4)return ee()(i,s);const e=[],t=[],n=i.length/2,o=[],a=[],l=[],c=[];for(let s=0;s<n;s++)e[s]=i[2*s],t[s]=i[2*s+1];for(let i=0;i<n-1;i++)l[i]=t[i+1]-t[i],c[i]=e[i+1]-e[i],a[i]=l[i]/c[i];o[0]=a[0],o[n-1]=a[n-2];for(let e=1;e<n-1;e++)0===a[e]||0===a[e-1]||a[e-1]>0!=a[e]>0?o[e]=0:(o[e]=3*(c[e-1]+c[e])/((2*c[e]+c[e-1])/a[e-1]+(c[e]+2*c[e-1])/a[e]),isFinite(o[e])||(o[e]=0));const u=(new K).move(e[0],t[0],!1,s[0]);for(let i=0;i<n-1;i++)u.curve(e[i]+c[i]/3,t[i]+o[i]*c[i]/3,e[i+1]-c[i]/3,t[i+1]-o[i+1]*c[i]/3,e[i+1],t[i+1],!1,s[i+1]);return u}}return ee()([],[])}}var ie=Object.freeze({__proto__:null,none:ee,simple:function(e){const t={divisor:2,fillHoles:!1,...e},i=1/Math.max(1,t.divisor);return function(e,s){const r=new K;let n,o=0,a=0;for(let l=0;l<e.length;l+=2){const c=e[l],u=e[l+1],d=(c-o)*i,h=s[l/2];void 0!==h.value?(void 0===n?r.move(c,u,!1,h):r.curve(o+d,a,c-d,u,c,u,!1,h),o=c,a=u,n=h):t.fillHoles||(o=a=0,n=void 0)}return r}},step:function(e){const t={postpone:!0,fillHoles:!1,...e};return function(e,i){const s=new K;let r,n=0,o=0;for(let a=0;a<e.length;a+=2){const l=e[a],c=e[a+1],u=i[a/2];void 0!==u.value?(void 0===r?s.move(l,c,!1,u):(t.postpone?s.line(l,o,!1,r):s.line(n,c,!1,u),s.line(l,c,!1,u)),n=l,o=c,r=u):t.fillHoles||(n=o=0,r=void 0)}return s}},cardinal:function(e){const t={tension:1,fillHoles:!1,...e},i=Math.min(1,Math.max(0,t.tension)),s=1-i;return function e(r,n){const o=I(r,n,{fillHoles:t.fillHoles});if(o.length){if(o.length>1)return K.join(o.map((t=>e(t.pathCoordinates,t.valueData))));{if(r=o[0].pathCoordinates,n=o[0].valueData,r.length<=4)return ee()(r,n);const e=(new K).move(r[0],r[1],!1,n[0]),t=!1;for(let o=0,a=r.length;a-2*Number(!t)>o;o+=2){const t=[{x:+r[o-2],y:+r[o-1]},{x:+r[o],y:+r[o+1]},{x:+r[o+2],y:+r[o+3]},{x:+r[o+4],y:+r[o+5]}];a-4===o?t[3]=t[2]:o||(t[0]={x:+r[o],y:+r[o+1]}),e.curve(i*(-t[0].x+6*t[1].x+t[2].x)/6+s*t[2].x,i*(-t[0].y+6*t[1].y+t[2].y)/6+s*t[2].y,i*(t[1].x+6*t[2].x-t[3].x)/6+s*t[2].x,i*(t[1].y+6*t[2].y-t[3].y)/6+s*t[2].y,t[2].x,t[2].y,!1,n[(o+2)/2])}return e}}return ee()([],[])}},monotoneCubic:te});class se{on(e,t){const{allListeners:i,listeners:s}=this;"*"===e?i.add(t):(s.has(e)||s.set(e,new Set),s.get(e).add(t))}off(e,t){const{allListeners:i,listeners:s}=this;if("*"===e)t?i.delete(t):i.clear();else if(s.has(e)){const i=s.get(e);t?i.delete(t):i.clear(),i.size||s.delete(e)}}emit(e,t){const{allListeners:i,listeners:s}=this;s.has(e)&&s.get(e).forEach((e=>e(t))),i.forEach((i=>i(e,t)))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const re=new WeakMap;class ne{update(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var s;return e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),t&&(this.options=g({},i?this.options:this.defaultOptions,t),this.initializeTimeoutId||(null===(s=this.optionsProvider)||void 0===s||s.removeMediaQueryListeners(),this.optionsProvider=Y(this.options,this.responsiveOptions,this.eventEmitter))),!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){var e;return this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),null===(e=this.optionsProvider)||void 0===e||e.removeMediaQueryListeners()),re.delete(this.container),this}on(e,t){return this.eventEmitter.on(e,t),this}off(e,t){return this.eventEmitter.off(e,t),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Y(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",(()=>this.update())),this.options.plugins&&this.options.plugins.forEach((e=>{Array.isArray(e)?e[0](this,e[1]):e(this)})),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(e,t,i,s,r){this.data=t,this.defaultOptions=i,this.options=s,this.responsiveOptions=r,this.eventEmitter=new se,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout((()=>this.initialize()),0);const n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error("Target element is not found");this.container=n;const o=re.get(n);o&&o.detach(),re.set(n,this)}}const oe={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class ae{createGridAndLabels(e,t,i,s){const r="x"===this.units.pos?i.axisX:i.axisY,n=this.ticks.map(((e,t)=>this.projectValue(e,t))),o=this.ticks.map(r.labelInterpolationFnc);n.forEach(((a,l)=>{const c=o[l],u={x:0,y:0};let d;d=n[l+1]?n[l+1]-a:Math.max(this.axisLength-a,this.axisLength/this.ticks.length),""!==c&&M(c)||("x"===this.units.pos?(a=this.chartRect.x1+a,u.x=i.axisX.labelOffset.x,"start"===i.axisX.position?u.y=this.chartRect.padding.top+i.axisX.labelOffset.y+5:u.y=this.chartRect.y1+i.axisX.labelOffset.y+5):(a=this.chartRect.y1-a,u.y=i.axisY.labelOffset.y-d,"start"===i.axisY.position?u.x=this.chartRect.padding.left+i.axisY.labelOffset.x:u.x=this.chartRect.x2+i.axisY.labelOffset.x+10),r.showGrid&&z(a,l,this,this.gridOffset,this.chartRect[this.counterUnits.len](),e,[i.classNames.grid,i.classNames[this.units.dir]],s),r.showLabel&&X(a,d,l,c,this,r.offset,u,t,[i.classNames.label,i.classNames[this.units.dir],"start"===r.position?i.classNames[r.position]:i.classNames.end],s))}))}constructor(e,t,i){this.units=e,this.chartRect=t,this.ticks=i,this.counterUnits=e===oe.x?oe.y:oe.x,this.axisLength=t[this.units.rectEnd]-t[this.units.rectStart],this.gridOffset=t[this.units.rectOffset]}}class le extends ae{projectValue(e){const t=Number(O(e,this.units.pos));return this.axisLength*(t-this.bounds.min)/this.bounds.range}constructor(e,t,i,s){const r=s.highLow||F(t,s,e.pos),n=p(i[e.rectEnd]-i[e.rectStart],r,s.scaleMinSpace||20,s.onlyInteger),o={min:n.min,max:n.max};super(e,i,n.values),this.bounds=n,this.range=o}}class ce extends ae{projectValue(e,t){return this.stepLength*t}constructor(e,t,i,s){const r=s.ticks||[];super(e,i,r);const n=Math.max(1,r.length-(s.stretch?1:0));this.stepLength=this.axisLength/n,this.stretch=Boolean(s.stretch)}}function ue(e,t,i){var s;if(w(e,"name")&&e.name&&(null===(s=t.series)||void 0===s?void 0:s[e.name])){const s=(null==t?void 0:t.series[e.name])[i];return void 0===s?t[i]:s}return t[i]}const de={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:y,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:y,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}},he={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:y,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:y,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}},me={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:y,labelDirection:"neutral",ignoreEmptyValues:!1};function pe(e,t,i){const s=t.x>e.x;return s&&"explode"===i||!s&&"implode"===i?"start":s&&"implode"===i||!s&&"explode"===i?"end":"middle"}t.AutoScaleAxis=le,t.Axis=ae,t.BarChart=class extends ne{createChart(e){const{data:t}=this,i=T(t,e.reverseData,e.horizontalBars?"x":"y",!0),s=V(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:"")),r=e.stackBars&&!0!==e.stackMode&&i.series.length?F([(n=i.series,b(n,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Array.from(t).reduce(((e,t)=>({x:e.x+(w(t,"x")?t.x:0),y:e.y+(w(t,"y")?t.y:0)})),{x:0,y:0})})))],e,e.horizontalBars?"x":"y"):F(i.series,e,e.horizontalBars?"x":"y");var n;this.svg=s;const o=s.elem("g").addClass(e.classNames.gridGroup),l=s.elem("g"),c=s.elem("g").addClass(e.classNames.labelGroup);"number"==typeof e.high&&(r.high=e.high),"number"==typeof e.low&&(r.low=e.low);const u=q(s,e);let d;const h=e.distributeSeries&&e.stackBars?i.labels.slice(0,1):i.labels;let m,p,g;e.horizontalBars?(d=p=void 0===e.axisX.type?new le(oe.x,i.series,u,{...e.axisX,highLow:r,referenceValue:0}):new e.axisX.type(oe.x,i.series,u,{...e.axisX,highLow:r,referenceValue:0}),m=g=void 0===e.axisY.type?new ce(oe.y,i.series,u,{ticks:h}):new e.axisY.type(oe.y,i.series,u,e.axisY)):(m=p=void 0===e.axisX.type?new ce(oe.x,i.series,u,{ticks:h}):new e.axisX.type(oe.x,i.series,u,e.axisX),d=g=void 0===e.axisY.type?new le(oe.y,i.series,u,{...e.axisY,highLow:r,referenceValue:0}):new e.axisY.type(oe.y,i.series,u,{...e.axisY,highLow:r,referenceValue:0}));const y=e.horizontalBars?u.x1+d.projectValue(0):u.y1-d.projectValue(0),f="accumulate"===e.stackMode,v="accumulate-relative"===e.stackMode,M=[],E=[];let C=M;m.createGridAndLabels(o,c,e,this.eventEmitter),d.createGridAndLabels(o,c,e,this.eventEmitter),e.showGridBackground&&U(o,u,e.classNames.gridBackground,this.eventEmitter),G(t.series,((s,r)=>{const n=r-(t.series.length-1)/2;let o;o=e.distributeSeries&&!e.stackBars?m.axisLength/i.series.length/2:e.distributeSeries&&e.stackBars?m.axisLength/2:m.axisLength/i.series[r].length/2;const c=l.elem("g"),h=w(s,"name")&&s.name,b=w(s,"className")&&s.className,G=w(s,"meta")?s.meta:void 0;h&&c.attr({"ct:series-name":h}),G&&c.attr({"ct:meta":L(G)}),c.addClass([e.classNames.series,b||"".concat(e.classNames.series,"-").concat(a(r))].join(" ")),i.series[r].forEach(((t,a)=>{const l=w(t,"x")&&t.x,h=w(t,"y")&&t.y;let b,G;b=e.distributeSeries&&!e.stackBars?r:e.distributeSeries&&e.stackBars?0:a,G=e.horizontalBars?{x:u.x1+d.projectValue(l||0,a,i.series[r]),y:u.y1-m.projectValue(h||0,b,i.series[r])}:{x:u.x1+m.projectValue(l||0,b,i.series[r]),y:u.y1-d.projectValue(h||0,a,i.series[r])},m instanceof ce&&(m.stretch||(G[m.units.pos]+=o*(e.horizontalBars?-1:1)),G[m.units.pos]+=e.stackBars||e.distributeSeries?0:n*e.seriesBarDistance*(e.horizontalBars?-1:1)),v&&(C=h>=0||l>=0?M:E);const P=C[a]||y;if(C[a]=P-(y-G[m.counterUnits.pos]),void 0===t)return;const A={["".concat(m.units.pos,"1")]:G[m.units.pos],["".concat(m.units.pos,"2")]:G[m.units.pos]};e.stackBars&&(f||v||!e.stackMode)?(A["".concat(m.counterUnits.pos,"1")]=P,A["".concat(m.counterUnits.pos,"2")]=C[a]):(A["".concat(m.counterUnits.pos,"1")]=y,A["".concat(m.counterUnits.pos,"2")]=G[m.counterUnits.pos]),A.x1=Math.min(Math.max(A.x1,u.x1),u.x2),A.x2=Math.min(Math.max(A.x2,u.x1),u.x2),A.y1=Math.min(Math.max(A.y1,u.y2),u.y1),A.y2=Math.min(Math.max(A.y2,u.y2),u.y1);const B=k(s,a),O=c.elem("line",A,e.classNames.bar).attr({"ct:value":[l,h].filter(x).join(","),"ct:meta":L(B)});this.eventEmitter.emit("draw",{type:"bar",value:t,index:a,meta:B,series:s,seriesIndex:r,axisX:p,axisY:g,chartRect:u,group:c,element:O,...A})}))}),e.reverseData),this.eventEmitter.emit("created",{chartRect:u,axisX:p,axisY:g,svg:s,options:e})}constructor(e,t,i,s){super(e,t,he,g({},he,i),s),this.data=t}},t.BaseChart=ne,t.EPSILON=l,t.EventEmitter=se,t.FixedScaleAxis=class extends ae{projectValue(e){const t=Number(O(e,this.units.pos));return this.axisLength*(t-this.range.min)/(this.range.max-this.range.min)}constructor(e,t,i,s){const r=s.highLow||F(t,s,e.pos),n=s.divisor||1,o=(s.ticks||f(n,(e=>r.low+(r.high-r.low)/n*e))).sort(((e,t)=>Number(e)-Number(t))),a={min:r.low,max:r.high};super(e,i,o),this.range=a}},t.Interpolation=ie,t.LineChart=class extends ne{createChart(e){const{data:t}=this,i=T(t,e.reverseData,!0),s=V(this.container,e.width,e.height,e.classNames.chart);this.svg=s;const r=s.elem("g").addClass(e.classNames.gridGroup),n=s.elem("g"),o=s.elem("g").addClass(e.classNames.labelGroup),l=q(s,e);let c,u;c=void 0===e.axisX.type?new ce(oe.x,i.series,l,{...e.axisX,ticks:i.labels,stretch:e.fullWidth}):new e.axisX.type(oe.x,i.series,l,e.axisX),u=void 0===e.axisY.type?new le(oe.y,i.series,l,{...e.axisY,high:x(e.high)?e.high:e.axisY.high,low:x(e.low)?e.low:e.axisY.low}):new e.axisY.type(oe.y,i.series,l,e.axisY),c.createGridAndLabels(r,o,e,this.eventEmitter),u.createGridAndLabels(r,o,e,this.eventEmitter),e.showGridBackground&&U(r,l,e.classNames.gridBackground,this.eventEmitter),G(t.series,((t,s)=>{const r=n.elem("g"),o=w(t,"name")&&t.name,d=w(t,"className")&&t.className,h=w(t,"meta")?t.meta:void 0;o&&r.attr({"ct:series-name":o}),h&&r.attr({"ct:meta":L(h)}),r.addClass([e.classNames.series,d||"".concat(e.classNames.series,"-").concat(a(s))].join(" "));const m=[],p=[];i.series[s].forEach(((e,r)=>{const n={x:l.x1+c.projectValue(e,r,i.series[s]),y:l.y1-u.projectValue(e,r,i.series[s])};m.push(n.x,n.y),p.push({value:e,valueIndex:r,meta:k(t,r)})}));const g={lineSmooth:ue(t,e,"lineSmooth"),showPoint:ue(t,e,"showPoint"),showLine:ue(t,e,"showLine"),showArea:ue(t,e,"showArea"),areaBase:ue(t,e,"areaBase")};let y;y="function"==typeof g.lineSmooth?g.lineSmooth:g.lineSmooth?te():ee();const f=y(m,p);if(g.showPoint&&f.pathElements.forEach((i=>{const{data:n}=i,o=r.elem("line",{x1:i.x,y1:i.y,x2:i.x+.01,y2:i.y},e.classNames.point);if(n){let e,t;w(n.value,"x")&&(e=n.value.x),w(n.value,"y")&&(t=n.value.y),o.attr({"ct:value":[e,t].filter(x).join(","),"ct:meta":L(n.meta)})}this.eventEmitter.emit("draw",{type:"point",value:null==n?void 0:n.value,index:(null==n?void 0:n.valueIndex)||0,meta:null==n?void 0:n.meta,series:t,seriesIndex:s,axisX:c,axisY:u,group:r,element:o,x:i.x,y:i.y,chartRect:l})})),g.showLine){const n=r.elem("path",{d:f.stringify()},e.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:i.series[s],path:f.clone(),chartRect:l,index:s,series:t,seriesIndex:s,meta:h,axisX:c,axisY:u,group:r,element:n})}if(g.showArea&&u.range){const n=Math.max(Math.min(g.areaBase,u.range.max),u.range.min),o=l.y1-u.projectValue(n);f.splitByCommand("M").filter((e=>e.pathElements.length>1)).map((e=>{const t=e.pathElements[0],i=e.pathElements[e.pathElements.length-1];return e.clone(!0).position(0).remove(1).move(t.x,o).line(t.x,t.y).position(e.pathElements.length+1).line(i.x,o)})).forEach((n=>{const o=r.elem("path",{d:n.stringify()},e.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:i.series[s],path:n.clone(),series:t,seriesIndex:s,axisX:c,axisY:u,chartRect:l,index:s,group:r,element:o,meta:h})}))}}),e.reverseData),this.eventEmitter.emit("created",{chartRect:l,axisX:c,axisY:u,svg:s,options:e})}constructor(e,t,i,s){super(e,t,de,g({},de,i),s),this.data=t}},t.PieChart=class extends ne{createChart(e){const{data:t}=this,i=T(t),s=[];let r,n,l=e.startAngle;const c=V(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie);this.svg=c;const u=q(c,e);let d=Math.min(u.width()/2,u.height()/2);const h=e.total||i.series.reduce(v,0),p=o(e.donutWidth);"%"===p.unit&&(p.value*=d/100),d-=e.donut?p.value/2:0,n="outside"===e.labelPosition||e.donut?d:"center"===e.labelPosition?0:d/2,e.labelOffset&&(n+=e.labelOffset);const g={x:u.x1+u.width()/2,y:u.y2+u.height()/2},y=1===t.series.filter((e=>w(e,"value")?0!==e.value:0!==e)).length;t.series.forEach(((e,t)=>s[t]=c.elem("g"))),e.showLabel&&(r=c.elem("g")),t.series.forEach(((o,c)=>{var f,v;if(0===i.series[c]&&e.ignoreEmptyValues)return;const b=w(o,"name")&&o.name,x=w(o,"className")&&o.className,E=w(o,"meta")?o.meta:void 0;b&&s[c].attr({"ct:series-name":b}),s[c].addClass([null===(f=e.classNames)||void 0===f?void 0:f.series,x||"".concat(null===(v=e.classNames)||void 0===v?void 0:v.series,"-").concat(a(c))].join(" "));let C=h>0?l+i.series[c]/h*360:0;const G=Math.max(0,l-(0===c||y?0:.2));C-G>=359.99&&(C=G+359.99);const k=m(g.x,g.y,d,G),P=m(g.x,g.y,d,C),A=new K(!e.donut).move(P.x,P.y).arc(d,d,0,Number(C-l>180),0,k.x,k.y);e.donut||A.line(g.x,g.y);const B=s[c].elem("path",{d:A.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(B.attr({"ct:value":i.series[c],"ct:meta":L(E)}),e.donut&&B.attr({style:"stroke-width: "+p.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:i.series[c],totalDataSum:h,index:c,meta:E,series:o,group:s[c],element:B,path:A.clone(),center:g,radius:d,startAngle:l,endAngle:C,chartRect:u}),e.showLabel){let s,a;s=1===t.series.length?{x:g.x,y:g.y}:m(g.x,g.y,n,l+(C-l)/2),a=i.labels&&!M(i.labels[c])?i.labels[c]:i.series[c];const d=e.labelInterpolationFnc(a,c);if(d||0===d){const t=r.elem("text",{dx:s.x,dy:s.y,"text-anchor":pe(g,s,e.labelDirection)},e.classNames.label).text(String(d));this.eventEmitter.emit("draw",{type:"label",index:c,group:r,element:t,text:""+d,chartRect:u,series:o,meta:E,...s})}}l=C})),this.eventEmitter.emit("created",{chartRect:u,svg:c,options:e})}constructor(e,t,i,s){super(e,t,me,g({},me,i),s),this.data=t}},t.StepAxis=ce,t.Svg=R,t.SvgList=W,t.SvgPath=K,t.alphaNumerate=a,t.axisUnits=oe,t.createChartRect=q,t.createGrid=z,t.createGridBackground=U,t.createLabel=X,t.createSvg=V,t.deserialize=function(e){if("string"!=typeof e)return e;if("NaN"===e)return NaN;let t=e=Object.keys(r).reduce(((e,t)=>e.replaceAll(r[t],t)),e);if("string"==typeof e)try{t=JSON.parse(e),t=void 0!==t.data?t.data:t}catch(e){}return t},t.determineAnchorPosition=pe,t.each=G,t.easings=N,t.ensureUnit=n,t.escapingMap=r,t.extend=g,t.getBounds=p,t.getHighLow=F,t.getMetaData=k,t.getMultiValue=O,t.getNumberOrUndefined=E,t.getSeriesOption=ue,t.isArrayOfArrays=C,t.isArrayOfSeries=A,t.isDataHoleValue=P,t.isFalseyButZero=M,t.isMultiValue=B,t.isNumeric=x,t.namespaces=i,t.noop=y,t.normalizeData=T,t.normalizePadding=H,t.optionsProvider=Y,t.orderOfMagnitude=c,t.polarToCartesian=m,t.precision=s,t.projectLength=u,t.quantity=o,t.rho=h,t.roundWithPrecision=d,t.safeHasProperty=w,t.serialMap=b,t.serialize=L,t.splitIntoSegments=I,t.sum=v,t.times=f}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}(()=>{let e=new(i(969).App);document.body.append(e.domElement)})()})();